<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.seidor.ulises.mapper.ExpMovimientosMapper" >
    <select id="obtener" resultType="com.seidor.ulises.model.ExpMovimientos" parameterType="com.seidor.ulises.model.ExpMovimientos" >
        SELECT id,
            cantidad,
            articulo,
            lote,
            estado,
            ubicacion,
            saldoConfirmacion,
            saldoEntr,
            saldoSali,
            tipoMovimiento,
            tipoMovimientoCliente,
            usuarioConfirmacion,
            version,
            observacion,
            documento1,
            documento2,
            linea,
            tratado,
            fechaTratado,
            error,
            tipoAlmacen,
            almacen,
            pasillo,
            columna,
            nivel,
            posicion,
            fechaConfirmacion,
            formato,
            incidencia,
            cantIncidencia,
            obsIncidencia,
            fechaCaducidad,
            almacenLogico,
            documentoTransporte,
            tipoStock,
            datoExtra1,
            datoExtra2,
            datoExtra3,
            moviRelacion,
            loteFabricacion,
            loteProveedor,
            ua,
            reserva,
            numeroSerie,
            datoExtra4,
            propietario,
            tipoMov
        FROM expMovimientos
        WHERE 1=1
        <if test=" cantidad != null ">
            AND cantidad = #{ cantidad , jdbcType = DOUBLE }
        </if>
        <if test=" articulo != null ">
            AND articulo = #{ articulo , jdbcType = VARCHAR }
        </if>
        <if test=" lote != null ">
            AND lote = #{ lote , jdbcType = VARCHAR }
        </if>
        <if test=" estado != null ">
            AND estado = #{ estado , jdbcType = VARCHAR }
        </if>
        <if test=" ubicacion != null ">
            AND ubicacion = #{ ubicacion , jdbcType = VARCHAR }
        </if>
        <if test=" saldoConfirmacion != null ">
            AND saldoConfirmacion = #{ saldoConfirmacion , jdbcType = DOUBLE }
        </if>
        <if test=" saldoEntr != null ">
            AND saldoEntr = #{ saldoEntr , jdbcType = DOUBLE }
        </if>
        <if test=" saldoSali != null ">
            AND saldoSali = #{ saldoSali , jdbcType = DOUBLE }
        </if>
        <if test=" tipoMovimiento != null ">
            AND tipoMovimiento = #{ tipoMovimiento , jdbcType = VARCHAR }
        </if>
        <if test=" tipoMovimientoCliente != null ">
            AND tipoMovimientoCliente = #{ tipoMovimientoCliente , jdbcType = VARCHAR }
        </if>
        <if test=" usuarioConfirmacion != null ">
            AND usuarioConfirmacion = #{ usuarioConfirmacion , jdbcType = VARCHAR }
        </if>
        <if test=" version != null ">
            AND version = #{ version , jdbcType = INTEGER }
        </if>
        <if test=" observacion != null ">
            AND observacion = #{ observacion , jdbcType = VARCHAR }
        </if>
        <if test=" documento1 != null ">
            AND documento1 = #{ documento1 , jdbcType = VARCHAR }
        </if>
        <if test=" documento2 != null ">
            AND documento2 = #{ documento2 , jdbcType = VARCHAR }
        </if>
        <if test=" linea != null ">
            AND linea = #{ linea , jdbcType = VARCHAR }
        </if>
        <if test=" tratado != null ">
            AND tratado = #{ tratado , jdbcType = VARCHAR }
        </if>
        <if test=" fechaTratado != null ">
            AND fechaTratado = #{ fechaTratado , jdbcType = TIMESTAMP }
        </if>
        <if test=" error != null ">
            AND error = #{ error , jdbcType = VARCHAR }
        </if>
        <if test=" tipoAlmacen != null ">
            AND tipoAlmacen = #{ tipoAlmacen , jdbcType = VARCHAR }
        </if>
        <if test=" almacen != null ">
            AND almacen = #{ almacen , jdbcType = VARCHAR }
        </if>
        <if test=" pasillo != null ">
            AND pasillo = #{ pasillo , jdbcType = VARCHAR }
        </if>
        <if test=" columna != null ">
            AND columna = #{ columna , jdbcType = VARCHAR }
        </if>
        <if test=" nivel != null ">
            AND nivel = #{ nivel , jdbcType = VARCHAR }
        </if>
        <if test=" posicion != null ">
            AND posicion = #{ posicion , jdbcType = VARCHAR }
        </if>
        <if test=" fechaConfirmacion != null ">
            AND fechaConfirmacion = #{ fechaConfirmacion , jdbcType = VARCHAR }
        </if>
        <if test=" formato != null ">
            AND formato = #{ formato , jdbcType = VARCHAR }
        </if>
        <if test=" incidencia != null ">
            AND incidencia = #{ incidencia , jdbcType = VARCHAR }
        </if>
        <if test=" cantIncidencia != null ">
            AND cantIncidencia = #{ cantIncidencia , jdbcType = DOUBLE }
        </if>
        <if test=" obsIncidencia != null ">
            AND obsIncidencia = #{ obsIncidencia , jdbcType = VARCHAR }
        </if>
        <if test=" fechaCaducidad != null ">
            AND fechaCaducidad = #{ fechaCaducidad , jdbcType = VARCHAR }
        </if>
        <if test=" almacenLogico != null ">
            AND almacenLogico = #{ almacenLogico , jdbcType = VARCHAR }
        </if>
        <if test=" documentoTransporte != null ">
            AND documentoTransporte = #{ documentoTransporte , jdbcType = VARCHAR }
        </if>
        <if test=" tipoStock != null ">
            AND tipoStock = #{ tipoStock , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra1 != null ">
            AND datoExtra1 = #{ datoExtra1 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra2 != null ">
            AND datoExtra2 = #{ datoExtra2 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra3 != null ">
            AND datoExtra3 = #{ datoExtra3 , jdbcType = VARCHAR }
        </if>
        <if test=" moviRelacion != null ">
            AND moviRelacion = #{ moviRelacion , jdbcType = INTEGER }
        </if>
        <if test=" loteFabricacion != null ">
            AND loteFabricacion = #{ loteFabricacion , jdbcType = VARCHAR }
        </if>
        <if test=" loteProveedor != null ">
            AND loteProveedor = #{ loteProveedor , jdbcType = VARCHAR }
        </if>
        <if test=" ua != null ">
            AND ua = #{ ua , jdbcType = VARCHAR }
        </if>
        <if test=" reserva != null ">
            AND reserva = #{ reserva , jdbcType = VARCHAR }
        </if>
        <if test=" numeroSerie != null ">
            AND numeroSerie = #{ numeroSerie , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra4 != null ">
            AND datoExtra4 = #{ datoExtra4 , jdbcType = VARCHAR }
        </if>
        <if test=" propietario != null ">
            AND propietario = #{ propietario , jdbcType = VARCHAR }
        </if>
        <if test=" tipoMov != null ">
            AND tipoMov = #{ tipoMov , jdbcType = VARCHAR }
        </if>
        LIMIT 0, 1
    </select>

    <select id="obtenerLista" resultType="com.seidor.ulises.model.ExpMovimientos" parameterType="com.seidor.ulises.model.ExpMovimientos" >
        SELECT id,
            cantidad,
            articulo,
            lote,
            estado,
            ubicacion,
            saldoConfirmacion,
            saldoEntr,
            saldoSali,
            tipoMovimiento,
            tipoMovimientoCliente,
            usuarioConfirmacion,
            version,
            observacion,
            documento1,
            documento2,
            linea,
            tratado,
            fechaTratado,
            error,
            tipoAlmacen,
            almacen,
            pasillo,
            columna,
            nivel,
            posicion,
            fechaConfirmacion,
            formato,
            incidencia,
            cantIncidencia,
            obsIncidencia,
            fechaCaducidad,
            almacenLogico,
            documentoTransporte,
            tipoStock,
            datoExtra1,
            datoExtra2,
            datoExtra3,
            moviRelacion,
            loteFabricacion,
            loteProveedor,
            ua,
            reserva,
            numeroSerie,
            datoExtra4,
            propietario,
            tipoMov
        FROM expMovimientos
        WHERE 1=1
        <if test=" cantidad != null ">
            AND cantidad = #{ cantidad , jdbcType = DOUBLE }
        </if>
        <if test=" articulo != null ">
            AND articulo = #{ articulo , jdbcType = VARCHAR }
        </if>
        <if test=" lote != null ">
            AND lote = #{ lote , jdbcType = VARCHAR }
        </if>
        <if test=" estado != null ">
            AND estado = #{ estado , jdbcType = VARCHAR }
        </if>
        <if test=" ubicacion != null ">
            AND ubicacion = #{ ubicacion , jdbcType = VARCHAR }
        </if>
        <if test=" saldoConfirmacion != null ">
            AND saldoConfirmacion = #{ saldoConfirmacion , jdbcType = DOUBLE }
        </if>
        <if test=" saldoEntr != null ">
            AND saldoEntr = #{ saldoEntr , jdbcType = DOUBLE }
        </if>
        <if test=" saldoSali != null ">
            AND saldoSali = #{ saldoSali , jdbcType = DOUBLE }
        </if>
        <if test=" tipoMovimiento != null ">
            AND tipoMovimiento = #{ tipoMovimiento , jdbcType = VARCHAR }
        </if>
        <if test=" tipoMovimientoCliente != null ">
            AND tipoMovimientoCliente = #{ tipoMovimientoCliente , jdbcType = VARCHAR }
        </if>
        <if test=" usuarioConfirmacion != null ">
            AND usuarioConfirmacion = #{ usuarioConfirmacion , jdbcType = VARCHAR }
        </if>
        <if test=" version != null ">
            AND version = #{ version , jdbcType = INTEGER }
        </if>
        <if test=" observacion != null ">
            AND observacion = #{ observacion , jdbcType = VARCHAR }
        </if>
        <if test=" documento1 != null ">
            AND documento1 = #{ documento1 , jdbcType = VARCHAR }
        </if>
        <if test=" documento2 != null ">
            AND documento2 = #{ documento2 , jdbcType = VARCHAR }
        </if>
        <if test=" linea != null ">
            AND linea = #{ linea , jdbcType = VARCHAR }
        </if>
        <if test=" tratado != null ">
            AND tratado = #{ tratado , jdbcType = VARCHAR }
        </if>
        <if test=" fechaTratado != null ">
            AND fechaTratado = #{ fechaTratado , jdbcType = TIMESTAMP }
        </if>
        <if test=" error != null ">
            AND error = #{ error , jdbcType = VARCHAR }
        </if>
        <if test=" tipoAlmacen != null ">
            AND tipoAlmacen = #{ tipoAlmacen , jdbcType = VARCHAR }
        </if>
        <if test=" almacen != null ">
            AND almacen = #{ almacen , jdbcType = VARCHAR }
        </if>
        <if test=" pasillo != null ">
            AND pasillo = #{ pasillo , jdbcType = VARCHAR }
        </if>
        <if test=" columna != null ">
            AND columna = #{ columna , jdbcType = VARCHAR }
        </if>
        <if test=" nivel != null ">
            AND nivel = #{ nivel , jdbcType = VARCHAR }
        </if>
        <if test=" posicion != null ">
            AND posicion = #{ posicion , jdbcType = VARCHAR }
        </if>
        <if test=" fechaConfirmacion != null ">
            AND fechaConfirmacion = #{ fechaConfirmacion , jdbcType = VARCHAR }
        </if>
        <if test=" formato != null ">
            AND formato = #{ formato , jdbcType = VARCHAR }
        </if>
        <if test=" incidencia != null ">
            AND incidencia = #{ incidencia , jdbcType = VARCHAR }
        </if>
        <if test=" cantIncidencia != null ">
            AND cantIncidencia = #{ cantIncidencia , jdbcType = DOUBLE }
        </if>
        <if test=" obsIncidencia != null ">
            AND obsIncidencia = #{ obsIncidencia , jdbcType = VARCHAR }
        </if>
        <if test=" fechaCaducidad != null ">
            AND fechaCaducidad = #{ fechaCaducidad , jdbcType = VARCHAR }
        </if>
        <if test=" almacenLogico != null ">
            AND almacenLogico = #{ almacenLogico , jdbcType = VARCHAR }
        </if>
        <if test=" documentoTransporte != null ">
            AND documentoTransporte = #{ documentoTransporte , jdbcType = VARCHAR }
        </if>
        <if test=" tipoStock != null ">
            AND tipoStock = #{ tipoStock , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra1 != null ">
            AND datoExtra1 = #{ datoExtra1 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra2 != null ">
            AND datoExtra2 = #{ datoExtra2 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra3 != null ">
            AND datoExtra3 = #{ datoExtra3 , jdbcType = VARCHAR }
        </if>
        <if test=" moviRelacion != null ">
            AND moviRelacion = #{ moviRelacion , jdbcType = INTEGER }
        </if>
        <if test=" loteFabricacion != null ">
            AND loteFabricacion = #{ loteFabricacion , jdbcType = VARCHAR }
        </if>
        <if test=" loteProveedor != null ">
            AND loteProveedor = #{ loteProveedor , jdbcType = VARCHAR }
        </if>
        <if test=" ua != null ">
            AND ua = #{ ua , jdbcType = VARCHAR }
        </if>
        <if test=" reserva != null ">
            AND reserva = #{ reserva , jdbcType = VARCHAR }
        </if>
        <if test=" numeroSerie != null ">
            AND numeroSerie = #{ numeroSerie , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra4 != null ">
            AND datoExtra4 = #{ datoExtra4 , jdbcType = VARCHAR }
        </if>
        <if test=" propietario != null ">
            AND propietario = #{ propietario , jdbcType = VARCHAR }
        </if>
        <if test=" tipoMov != null ">
            AND tipoMov = #{ tipoMov , jdbcType = VARCHAR }
        </if>
    </select>
        
    <update id="actualizar" parameterType="com.seidor.ulises.model.ExpMovimientos" >
        UPDATE expMovimientos SET
            tratado = #{ expMovimientos.tratado , jdbcType = VARCHAR }
            , fechaTratado = #{ expMovimientos.fechaTratado , jdbcType = TIMESTAMP }
        WHERE id = #{ expMovimientos.id , jdbcType = INTEGER }
    </update>

    <update id="actualizarLista" parameterType="java.util.List" useGeneratedKeys="false" >
        <foreach collection="listExpMovimientos" item="item"  index="index"  separator=";">
            UPDATE expMovimientos 
            <set>
                tratado = #{ item.tratado , jdbcType = VARCHAR }
                , fechaTratado = #{ item.fechaTratado , jdbcType = TIMESTAMP }
            </set>
            WHERE id = #{ item.id , jdbcType = INTEGER }
        </foreach>
    </update>
</mapper>