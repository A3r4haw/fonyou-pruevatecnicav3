<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.seidor.ulises.mapper.ExpEntradasMapper" >
    <select id="obtener" resultType="com.seidor.ulises.model.ExpEntradas" parameterType="com.seidor.ulises.model.ExpEntradas" >
        SELECT id,
            albaran,
            linea,
            articulo,
            lote,
            formato,
            cantidadOriginal,
            cantidadConfirmada,
            datoExtra1,
            datoExtra2,
            datoExtra3,
            tratado,
            error,
            fechaTratado,
            version,
            tipoMovimientoCliente,
            documento,
            fechaEntrada,
            fechaCaducidad,
            medico,
            tipoStock,
            documentoTransporte,
            fechaFabricacion,
            clasificaciones,
            valorClasificaciones,
            clasificacionesLin,
            valorClasificacionesLin,
            ua
        FROM expEntradas
        WHERE 1=1
        <if test=" albaran != null ">
            AND albaran = #{ albaran , jdbcType = VARCHAR }
        </if>
        <if test=" linea != null ">
            AND linea = #{ linea , jdbcType = VARCHAR }
        </if>
        <if test=" articulo != null ">
            AND articulo = #{ articulo , jdbcType = VARCHAR }
        </if>
        <if test=" lote != null ">
            AND lote = #{ lote , jdbcType = VARCHAR }
        </if>
        <if test=" formato != null ">
            AND formato = #{ formato , jdbcType = VARCHAR }
        </if>
        <if test=" cantidadOriginal != null ">
            AND cantidadOriginal = #{ cantidadOriginal , jdbcType = DOUBLE }
        </if>
        <if test=" cantidadConfirmada != null ">
            AND cantidadConfirmada = #{ cantidadConfirmada , jdbcType = DOUBLE }
        </if>
        <if test=" datoExtra1 != null ">
            AND datoExtra1 = #{ datoExtra1 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra2 != null ">
            AND datoExtra2 = #{ datoExtra2 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra3 != null ">
            AND datoExtra3 = #{ datoExtra3 , jdbcType = VARCHAR }
        </if>
        <if test=" tratado != null ">
            AND tratado = #{ tratado , jdbcType = VARCHAR }
        </if>
        <if test=" error != null ">
            AND error = #{ error , jdbcType = VARCHAR }
        </if>
        <if test=" fechaTratado != null ">
            AND fechaTratado = #{ fechaTratado , jdbcType = TIMESTAMP }
        </if>
        <if test=" version != null ">
            AND version = #{ version , jdbcType = INTEGER }
        </if>
        <if test=" tipoMovimientoCliente != null ">
            AND tipoMovimientoCliente = #{ tipoMovimientoCliente , jdbcType = VARCHAR }
        </if>
        <if test=" documento != null ">
            AND documento = #{ documento , jdbcType = VARCHAR }
        </if>
        <if test=" fechaEntrada != null ">
            AND fechaEntrada = #{ fechaEntrada , jdbcType = VARCHAR }
        </if>
        <if test=" fechaCaducidad != null ">
            AND fechaCaducidad = #{ fechaCaducidad , jdbcType = VARCHAR }
        </if>
        <if test=" medico != null ">
            AND medico = #{ medico , jdbcType = VARCHAR }
        </if>
        <if test=" tipoStock != null ">
            AND tipoStock = #{ tipoStock , jdbcType = VARCHAR }
        </if>
        <if test=" documentoTransporte != null ">
            AND documentoTransporte = #{ documentoTransporte , jdbcType = VARCHAR }
        </if>
        <if test=" fechaFabricacion != null ">
            AND fechaFabricacion = #{ fechaFabricacion , jdbcType = VARCHAR }
        </if>
        <if test=" clasificaciones != null ">
            AND clasificaciones = #{ clasificaciones , jdbcType = VARCHAR }
        </if>
        <if test=" valorClasificaciones != null ">
            AND valorClasificaciones = #{ valorClasificaciones , jdbcType = VARCHAR }
        </if>
        <if test=" clasificacionesLin != null ">
            AND clasificacionesLin = #{ clasificacionesLin , jdbcType = VARCHAR }
        </if>
        <if test=" valorClasificacionesLin != null ">
            AND valorClasificacionesLin = #{ valorClasificacionesLin , jdbcType = VARCHAR }
        </if>
        <if test=" ua != null ">
            AND ua = #{ ua , jdbcType = VARCHAR }
        </if>
        LIMIT 0, 1
    </select>

    <select id="obtenerLista" resultType="com.seidor.ulises.model.ExpEntradas" parameterType="com.seidor.ulises.model.ExpEntradas" >
        SELECT id,
            albaran,
            linea,
            articulo,
            lote,
            formato,
            cantidadOriginal,
            cantidadConfirmada,
            datoExtra1,
            datoExtra2,
            datoExtra3,
            tratado,
            error,
            fechaTratado,
            version,
            tipoMovimientoCliente,
            documento,
            fechaEntrada,
            fechaCaducidad,
            medico,
            tipoStock,
            documentoTransporte,
            fechaFabricacion,
            clasificaciones,
            valorClasificaciones,
            clasificacionesLin,
            valorClasificacionesLin,
            ua
        FROM expEntradas
        WHERE 1=1
        <if test=" albaran != null ">
            AND albaran = #{ albaran , jdbcType = VARCHAR }
        </if>
        <if test=" linea != null ">
            AND linea = #{ linea , jdbcType = VARCHAR }
        </if>
        <if test=" articulo != null ">
            AND articulo = #{ articulo , jdbcType = VARCHAR }
        </if>
        <if test=" lote != null ">
            AND lote = #{ lote , jdbcType = VARCHAR }
        </if>
        <if test=" formato != null ">
            AND formato = #{ formato , jdbcType = VARCHAR }
        </if>
        <if test=" cantidadOriginal != null ">
            AND cantidadOriginal = #{ cantidadOriginal , jdbcType = DOUBLE }
        </if>
        <if test=" cantidadConfirmada != null ">
            AND cantidadConfirmada = #{ cantidadConfirmada , jdbcType = DOUBLE }
        </if>
        <if test=" datoExtra1 != null ">
            AND datoExtra1 = #{ datoExtra1 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra2 != null ">
            AND datoExtra2 = #{ datoExtra2 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra3 != null ">
            AND datoExtra3 = #{ datoExtra3 , jdbcType = VARCHAR }
        </if>
        <if test=" tratado != null ">
            AND tratado = #{ tratado , jdbcType = VARCHAR }
        </if>
        <if test=" error != null ">
            AND error = #{ error , jdbcType = VARCHAR }
        </if>
        <if test=" fechaTratado != null ">
            AND fechaTratado = #{ fechaTratado , jdbcType = TIMESTAMP }
        </if>
        <if test=" version != null ">
            AND version = #{ version , jdbcType = INTEGER }
        </if>
        <if test=" tipoMovimientoCliente != null ">
            AND tipoMovimientoCliente = #{ tipoMovimientoCliente , jdbcType = VARCHAR }
        </if>
        <if test=" documento != null ">
            AND documento = #{ documento , jdbcType = VARCHAR }
        </if>
        <if test=" fechaEntrada != null ">
            AND fechaEntrada = #{ fechaEntrada , jdbcType = VARCHAR }
        </if>
        <if test=" fechaCaducidad != null ">
            AND fechaCaducidad = #{ fechaCaducidad , jdbcType = VARCHAR }
        </if>
        <if test=" medico != null ">
            AND medico = #{ medico , jdbcType = VARCHAR }
        </if>
        <if test=" tipoStock != null ">
            AND tipoStock = #{ tipoStock , jdbcType = VARCHAR }
        </if>
        <if test=" documentoTransporte != null ">
            AND documentoTransporte = #{ documentoTransporte , jdbcType = VARCHAR }
        </if>
        <if test=" fechaFabricacion != null ">
            AND fechaFabricacion = #{ fechaFabricacion , jdbcType = VARCHAR }
        </if>
        <if test=" clasificaciones != null ">
            AND clasificaciones = #{ clasificaciones , jdbcType = VARCHAR }
        </if>
        <if test=" valorClasificaciones != null ">
            AND valorClasificaciones = #{ valorClasificaciones , jdbcType = VARCHAR }
        </if>
        <if test=" clasificacionesLin != null ">
            AND clasificacionesLin = #{ clasificacionesLin , jdbcType = VARCHAR }
        </if>
        <if test=" valorClasificacionesLin != null ">
            AND valorClasificacionesLin = #{ valorClasificacionesLin , jdbcType = VARCHAR }
        </if>
        <if test=" ua != null ">
            AND ua = #{ ua , jdbcType = VARCHAR }
        </if>
    </select>
        
    <update id="actualizar" parameterType="com.seidor.ulises.model.ExpEntradas" >
        UPDATE expEntradas SET
            tratado = #{ expEntradas.tratado , jdbcType = VARCHAR }
            , fechaTratado = #{ expEntradas.fechaTratado , jdbcType = TIMESTAMP }
        WHERE id = #{ expEntradas.id , jdbcType = INTEGER }
    </update>

    <update id="actualizarLista" parameterType="java.util.List" useGeneratedKeys="false" >
        <foreach collection="listExpEntradas" item="item"  index="index"  separator=";">
            UPDATE expEntradas 
            <set>
                tratado = #{ item.tratado , jdbcType = VARCHAR }
                , fechaTratado = #{ item.fechaTratado , jdbcType = TIMESTAMP }
            </set>
            WHERE id = #{ item.id , jdbcType = INTEGER }
        </foreach>
    </update>
</mapper>