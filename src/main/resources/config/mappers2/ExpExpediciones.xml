<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.seidor.ulises.mapper.ExpExpedicionesMapper" >
    <select id="obtener" resultType="com.seidor.ulises.model.ExpExpediciones" parameterType="com.seidor.ulises.model.ExpExpediciones" >
        SELECT id,
            expedicion,
            documento,
            agencia,
            fechaServicio,
            bultos,
            peso,
            datoExtra1,
            datoExtra2,
            datoExtra3,
            tratado,
            error,
            fechaTratado,
            version,
            anulada,
            mesa,
            expedicionAgencia,
            centroCoste,
            volumen,
            tipoMovimientoCliente,
            packingList,
            expedPadre,
            situacion,
            clasificaciones,
            valorClasificaciones,
            tipoBloqueFin,
            referencia
        FROM expExpediciones
        WHERE 1=1
        <if test=" expedicion != null ">
            AND expedicion = #{ expedicion , jdbcType = VARCHAR }
        </if>
        <if test=" documento != null ">
            AND documento = #{ documento , jdbcType = VARCHAR }
        </if>
        <if test=" agencia != null ">
            AND agencia = #{ agencia , jdbcType = VARCHAR }
        </if>
        <if test=" fechaServicio != null ">
            AND fechaServicio = #{ fechaServicio , jdbcType = VARCHAR }
        </if>
        <if test=" bultos != null ">
            AND bultos = #{ bultos , jdbcType = INTEGER }
        </if>
        <if test=" peso != null ">
            AND peso = #{ peso , jdbcType = DOUBLE }
        </if>
        <if test=" datoExtra1 != null ">
            AND datoExtra1 = #{ datoExtra1 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra2 != null ">
            AND datoExtra2 = #{ datoExtra2 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra3 != null ">
            AND datoExtra3 = #{ datoExtra3 , jdbcType = VARCHAR }
        </if>
        <if test=" tratado != null ">
            AND tratado = #{ tratado , jdbcType = VARCHAR }
        </if>
        <if test=" error != null ">
            AND error = #{ error , jdbcType = VARCHAR }
        </if>
        <if test=" fechaTratado != null ">
            AND fechaTratado = #{ fechaTratado , jdbcType = TIMESTAMP }
        </if>
        <if test=" version != null ">
            AND version = #{ version , jdbcType = INTEGER }
        </if>
        <if test=" anulada != null ">
            AND anulada = #{ anulada , jdbcType = INTEGER }
        </if>
        <if test=" mesa != null ">
            AND mesa = #{ mesa , jdbcType = INTEGER }
        </if>
        <if test=" expedicionAgencia != null ">
            AND expedicionAgencia = #{ expedicionAgencia , jdbcType = VARCHAR }
        </if>
        <if test=" centroCoste != null ">
            AND centroCoste = #{ centroCoste , jdbcType = VARCHAR }
        </if>
        <if test=" volumen != null ">
            AND volumen = #{ volumen , jdbcType = DOUBLE }
        </if>
        <if test=" tipoMovimientoCliente != null ">
            AND tipoMovimientoCliente = #{ tipoMovimientoCliente , jdbcType = VARCHAR }
        </if>
        <if test=" packingList != null ">
            AND packingList = #{ packingList , jdbcType = INTEGER }
        </if>
        <if test=" expedPadre != null ">
            AND expedPadre = #{ expedPadre , jdbcType = VARCHAR }
        </if>
        <if test=" situacion != null ">
            AND situacion = #{ situacion , jdbcType = VARCHAR }
        </if>
        <if test=" clasificaciones != null ">
            AND clasificaciones = #{ clasificaciones , jdbcType = VARCHAR }
        </if>
        <if test=" valorClasificaciones != null ">
            AND valorClasificaciones = #{ valorClasificaciones , jdbcType = VARCHAR }
        </if>
        <if test=" tipoBloqueFin != null ">
            AND tipoBloqueFin = #{ tipoBloqueFin , jdbcType = VARCHAR }
        </if>
        <if test=" referencia != null ">
            AND referencia = #{ referencia , jdbcType = VARCHAR }
        </if>
        LIMIT 0, 1
    </select>

    <select id="obtenerLista" resultType="com.seidor.ulises.model.ExpExpediciones" parameterType="com.seidor.ulises.model.ExpExpediciones" >
        SELECT id,
            expedicion,
            documento,
            agencia,
            fechaServicio,
            bultos,
            peso,
            datoExtra1,
            datoExtra2,
            datoExtra3,
            tratado,
            error,
            fechaTratado,
            version,
            anulada,
            mesa,
            expedicionAgencia,
            centroCoste,
            volumen,
            tipoMovimientoCliente,
            packingList,
            expedPadre,
            situacion,
            clasificaciones,
            valorClasificaciones,
            tipoBloqueFin,
            referencia
        FROM expExpediciones
        WHERE 1=1
        <if test=" expedicion != null ">
            AND expedicion = #{ expedicion , jdbcType = VARCHAR }
        </if>
        <if test=" documento != null ">
            AND documento = #{ documento , jdbcType = VARCHAR }
        </if>
        <if test=" agencia != null ">
            AND agencia = #{ agencia , jdbcType = VARCHAR }
        </if>
        <if test=" fechaServicio != null ">
            AND fechaServicio = #{ fechaServicio , jdbcType = VARCHAR }
        </if>
        <if test=" bultos != null ">
            AND bultos = #{ bultos , jdbcType = INTEGER }
        </if>
        <if test=" peso != null ">
            AND peso = #{ peso , jdbcType = DOUBLE }
        </if>
        <if test=" datoExtra1 != null ">
            AND datoExtra1 = #{ datoExtra1 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra2 != null ">
            AND datoExtra2 = #{ datoExtra2 , jdbcType = VARCHAR }
        </if>
        <if test=" datoExtra3 != null ">
            AND datoExtra3 = #{ datoExtra3 , jdbcType = VARCHAR }
        </if>
        <if test=" tratado != null ">
            AND tratado = #{ tratado , jdbcType = VARCHAR }
        </if>
        <if test=" error != null ">
            AND error = #{ error , jdbcType = VARCHAR }
        </if>
        <if test=" fechaTratado != null ">
            AND fechaTratado = #{ fechaTratado , jdbcType = TIMESTAMP }
        </if>
        <if test=" version != null ">
            AND version = #{ version , jdbcType = INTEGER }
        </if>
        <if test=" anulada != null ">
            AND anulada = #{ anulada , jdbcType = INTEGER }
        </if>
        <if test=" mesa != null ">
            AND mesa = #{ mesa , jdbcType = INTEGER }
        </if>
        <if test=" expedicionAgencia != null ">
            AND expedicionAgencia = #{ expedicionAgencia , jdbcType = VARCHAR }
        </if>
        <if test=" centroCoste != null ">
            AND centroCoste = #{ centroCoste , jdbcType = VARCHAR }
        </if>
        <if test=" volumen != null ">
            AND volumen = #{ volumen , jdbcType = DOUBLE }
        </if>
        <if test=" tipoMovimientoCliente != null ">
            AND tipoMovimientoCliente = #{ tipoMovimientoCliente , jdbcType = VARCHAR }
        </if>
        <if test=" packingList != null ">
            AND packingList = #{ packingList , jdbcType = INTEGER }
        </if>
        <if test=" expedPadre != null ">
            AND expedPadre = #{ expedPadre , jdbcType = VARCHAR }
        </if>
        <if test=" situacion != null ">
            AND situacion = #{ situacion , jdbcType = VARCHAR }
        </if>
        <if test=" clasificaciones != null ">
            AND clasificaciones = #{ clasificaciones , jdbcType = VARCHAR }
        </if>
        <if test=" valorClasificaciones != null ">
            AND valorClasificaciones = #{ valorClasificaciones , jdbcType = VARCHAR }
        </if>
        <if test=" tipoBloqueFin != null ">
            AND tipoBloqueFin = #{ tipoBloqueFin , jdbcType = VARCHAR }
        </if>
        <if test=" referencia != null ">
            AND referencia = #{ referencia , jdbcType = VARCHAR }
        </if>
    </select>
        
    <update id="actualizar" parameterType="com.seidor.ulises.model.ExpExpediciones" >
        UPDATE expExpediciones SET
            tratado = #{ expExpediciones.tratado , jdbcType = VARCHAR }
            , fechaTratado = #{ expExpediciones.fechaTratado , jdbcType = TIMESTAMP }
        WHERE id = #{ expExpediciones.id , jdbcType = INTEGER }
    </update>

    <update id="actualizarLista" parameterType="java.util.List" useGeneratedKeys="false" >
        <foreach collection="listExpExpediciones" item="item"  index="index"  separator=";">
            UPDATE expExpediciones 
            <set>
                tratado = #{ item.tratado , jdbcType = VARCHAR }
                , fechaTratado = #{ item.fechaTratado , jdbcType = TIMESTAMP }
            </set>
            WHERE id = #{ item.id , jdbcType = INTEGER }
        </foreach>
    </update>
</mapper>