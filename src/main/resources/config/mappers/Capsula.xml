<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="mx.mc.mapper.CapsulaMapper" >
 
   
     <select id = "obtieneListaCapsulasActivas" resultType="mx.mc.model.Capsula" parameterType="Map" >
        SELECT codigoCapsula, activo
        FROM capsula
        WHERE 1=1
        <if test=" activo != null ">
            AND activo = #{ activo , jdbcType = INTEGER }
            AND idEstructura = #{ idEstructura , jdbcType = INTEGER }
        </if>
    </select>
   
   <select id = "obteneridCapsula" resultType="mx.mc.model.Capsula" parameterType="Map" >
        SELECT idCapsula , nombre
        FROM capsula
        WHERE
        codigoCapsula = #{ codigoCapsula , jdbcType = VARCHAR} 
    </select>
   
    <select id="obtenerCapsulas" resultType="mx.mc.model.Capsula" parameterType="Map">
        SELECT 
        idenvioNeumatico,
        idCapsula,
        folioSurtimiento,
        usuario,
        fechaHoraSalida,
        estacionSalida,
        fechaHoraLlegada,
        estacionLlegada 
        FROM envioNeumatico
        where 
        1 = 1
        <if test="cadenaBusqueda != null">
            AND (
            idCapsula LIKE '%${ cadenaBusqueda }%'
            )
        </if>
    </select>
    
    <select id="obtenerCapsulasponombre" resultType="mx.mc.model.Capsula" parameterType="Map">
        SELECT 
        idCapsula
        FROM capsula
        where 
        1 = 1
        <if test="cadenaBusqueda != null">
            AND (
            idCapsula LIKE '%${ cadenaBusqueda }%'
            )
        </if>
    </select>
</mapper>