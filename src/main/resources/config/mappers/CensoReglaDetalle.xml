<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="mx.mc.mapper.CensoReglaDetalleMapper" >

    <select id="obtenerReglaDetalle" resultType="mx.mc.model.CensoReglaDetalle">
        SELECT idCensoReglaDetalle, idCensoRegla, numeroSurtimiento, minimo, maximo, numeroDias
        FROM censoReglaDetalle
        WHERE 1=1
        <if test=" idCensoRegla != null ">
            AND idCensoRegla = '${idCensoRegla}'
        </if>
        ORDER BY numeroSurtimiento
    </select>
    
    <insert id="insertarListaCensoReglaDetalle" parameterType="java.util.List">
        INSERT INTO censoReglaDetalle (
                idCensoReglaDetalle, idCensoRegla, numeroSurtimiento, minimo, maximo, numeroDias,
                insertFecha, insertIdUsuario, updateFecha, updateIdUsuario
            ) VALUES 
        <foreach collection="list" item="item" separator="," index="index" >
            (
                #{ item.idCensoReglaDetalle , jdbcType = VARCHAR },
                #{ item.idCensoRegla , jdbcType = VARCHAR },
                #{ item.numeroSurtimiento , jdbcType = INTEGER },
                #{ item.minimo , jdbcType = INTEGER },
                #{ item.maximo , jdbcType = INTEGER },
                #{ item.numeroDias , jdbcType = INTEGER },
                #{ item.insertFecha , jdbcType = TIMESTAMP },
                #{ item.insertIdUsuario , jdbcType = VARCHAR },
                #{ item.updateFecha , jdbcType = TIMESTAMP },
                #{ item.updateIdUsuario , jdbcType = VARCHAR }
            )
        </foreach>
    </insert>
    
    <update id="actualizarListaCensoReglaDetalle" parameterType="java.util.List">
        <foreach collection="list" item="item" separator=";" index="index" >
            UPDATE censoReglaDetalle
                SET numeroSurtimiento = #{ item.numeroSurtimiento , jdbcType = INTEGER }
                  , minimo = #{ item.minimo , jdbcType = INTEGER }
                  , maximo = #{ item.maximo , jdbcType = INTEGER }
                  , numeroDias = #{ item.numeroDias , jdbcType = INTEGER }
                  , insertFecha = #{ item.insertFecha , jdbcType = TIMESTAMP }
                  , insertIdUsuario = #{ item.insertIdUsuario , jdbcType = VARCHAR }
                  , updateFecha = #{ item.updateFecha , jdbcType = TIMESTAMP }
                  , updateIdUsuario = #{ item.updateIdUsuario , jdbcType = VARCHAR }
            WHERE idCensoReglaDetalle = #{ item.idCensoReglaDetalle , jdbcType = VARCHAR }
        </foreach>
    </update>
    
</mapper>
