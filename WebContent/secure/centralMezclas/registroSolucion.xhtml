<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"    
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" >

    <f:metadata>
        <f:viewParam name="tipoProc" value="1" />
    </f:metadata>

    <h:body>
        <ui:composition template="../template/mainLayout.xhtml">
            <ui:define name="content">
                <div class="mainPanelAmplio" >
                    <h:form id="mainForm">
                        <p:messages id="validaMsg" class="validaMsg" globalOnly="true" closable="true" >
                            <p:autoUpdate />
                        </p:messages>
                        <p:focus context="mainForm"/>

                        <div id="busqueda" style="height: 30px !important;">
                            <p:outputLabel value="#{registroSolucionMB.validaPrescripcion ? 'Órdenes de Mezclas ANT y ONC' : 'Registro de Prescripciones' }"
                                           style="color: #FFFFFF;font-size: 18px !important;font-weight: bold;margin-right: 50px;" />
                            <p:selectCheckboxMenu id="menu" value="#{registroSolucionMB.tipoPrescripcionSelectedList}" label="Tipo" title="Filtro por tipo de Prescripción"
                                                  filter="true" filterMatchMode="startsWith" panelStyle="width:110px" style="width: 110px;">
                                <f:selectItem value="#{N}" itemLabel="Normal" itemValue="N" />
                                <f:selectItem value="#{U}" itemLabel="Urgente" itemValue="U" />
                                <f:selectItem value="#{D}" itemLabel="Dosis Única" itemValue="D" />
                            </p:selectCheckboxMenu>
                            <p:spacer width="10px;" />
                            <p:inputText id="busqueda" 
                                         value="#{registroSolucionMB.cadenaBusqueda}" 
                                         class="textSearch"
                                         style="width: 40% !important;" 
                                         placeholder="Buscar..." title="Buscar por Número de Cama, Paciente o Servicio" />
                            <i class="fa fa-search" aria-hidden="true" style="position:absolute;  text-indent: 5px; margin-top: 3px; margin-left: -25px; color: #AAAAAA; font-size: 0.9em;" />
                            <p:spacer width="12px" />
                            <p:commandButton title="Buscar" value="Buscar" icon="ui-icon-search" 
                                             onclick="PF('statusProcess').show();"
                                             oncomplete="PF('statusProcess').hide();}"
                                             actionListener="#{registroSolucionMB.obtenerSurtimientos}"
                                             update="@form"  />
                        </div>

                        <p:commandButton title="Crear nuevo registro" value="#{registroSolucionMB.validaPrescripcion ? 'Nueva Orden' : 'Nueva Prescripción'}" styleClass="btnMusAzul"
                                         onclick="PF('statusProcess').show();" style="margin-top: 5px; margin-bottom: 5px;"
                                         oncomplete="PF('statusProcess').hide(); if (args.estatus) { PF('modalNuevaOrden').show(); }"
                                         update=":formNuevaOrden" actionListener="#{registroSolucionMB.setNuevaOrden}"
                                         rendered="#{registroSolucionMB.permiso.puedeCrear}">
                            <p:resetInput target="formNuevaOrden"/>
                        </p:commandButton>

                        <p:toolbar rendered="false">
                            <p:toolbarGroup id="toolbar"  >
                                <p:commandButton id="btnModificar" value="Modificar"
                                                 title="Modificar Rol" icon="ui-icon-pencil"
                                                 onclick="PF('statusProcess').show()"
                                                 oncomplete="PF('statusProcess').hide(); PF('modalSurtimiento').show();"
                                                 update=":formSurtimientoDetail"
                                                 disabled="#{!registroSolucionMB.permiso.puedeEditar or !registroSolucionMB.elementoSeleccionado}"
                                                 rendered="false" />
                            </p:toolbarGroup>
                        </p:toolbar>

                        <p:tabView>
                            <p:ajax event="tabChange" process="@this" update="mainForm:tblSurtimientos" listener="#{registroSolucionMB.onTabChange}"/>
                            <p:tab title="#{registroSolucionMB.validaPrescripcion ? 'PROGRAMADAS' : 'SOLICITADAS' }" id="#{registroSolucionMB.porValidar}"/>
                            <p:tab title="VALIDADAS" id="#{registroSolucionMB.validada}" />
                            <p:tab title="RECHAZADAS" id="#{registroSolucionMB.rechazada}" />
                        </p:tabView>
                        <p:panel id="dataTable" style="margin:-28px 0px;">
                            <p:dataTable id="tblSurtimientos" 
                                         widgetVar="tblSurtimientos"         
                                         value="#{registroSolucionMB.dispensacionSolucionLazy}"
                                         lazy="true"
                                         selection="#{registroSolucionMB.surtimientoExtendedSelected}"
                                         var="item" 
                                         rowKey="#{item.idSurtimiento}"
                                         rowIndexVar="row"
                                         selectionMode="single"
                                         style="margin-bottom:5px;"
                                         styleClass="mystyle"
                                         scrollRows="10" scrollable="true" scrollHeight="350"
                                         emptyMessage="No se encontraron Registros"
                                         reflow="true"
                                         paginatorTemplate=" {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}"
                                         currentPageReportTemplate=" "
                                         paginator="true"
                                         rows="10"
                                         paginatorPosition="bottom"
                                         rowStyleClass="#{item.tipoPrescripcion eq 'U' ? 'urgente' : item.tipoPrescripcion eq 'D' ? 'unica': null}" >
                                <p:ajax event="rowDblselect" listener="#{registroSolucionMB.verSurtimiento}" 
                                        update=":formEditarOrden "
                                        onstart="PF('statusProcess').show()"
                                        oncomplete="PF('statusProcess').hide(); PF('modalEditarOrden').show();" />

                                <ui:remove>
                                    <f:facet name="{Exporters}">
                                        <div style="float:right">
                                            <h:commandLink >
                                                <img src="#{request.contextPath}/resources/img/btnxls.png" style="height: 25px !important; margin-left: 5px !important;" title="Exportar" />
                                                <p:dataExporter type="xls" target="tblSurtimientos" fileName="prescripcionesPorValidar" />
                                            </h:commandLink>
                                        </div>
                                    </f:facet>
                                </ui:remove>

                                <p:column style="text-align: left; width: 6% " exportable="false" 
                                          sortBy="#{item.tipoPrescripcion}" 
                                          filterBy="#{item.tipoPrescripcion}" filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Tipo" />
                                    </f:facet>
                                    <p:outputPanel rendered="#{item.tipoPrescripcion eq 'N'}" >
                                        <img src="#{request.contextPath}/resources/img/cpnormal.png" style="height: 15px !important; margin-left: 0px !important;" />
                                        <p:spacer width="8px"/>
                                        <h:outputText value="Normal"/>
                                    </p:outputPanel>
                                    <p:outputPanel rendered="#{item.tipoPrescripcion eq 'U'}" >
                                        <img src="#{request.contextPath}/resources/img/cpurgente.png" style="height: 15px !important; margin-left: 0px !important;" />
                                        <p:spacer width="8px"/>
                                        <h:outputText value="Urgente"/>
                                    </p:outputPanel>
                                    <p:outputPanel rendered="#{item.tipoPrescripcion eq 'D'}" >
                                        <img src="#{request.contextPath}/resources/img/cpunica.png" style="height: 15px !important; margin-left: 0px !important;" />
                                        <p:spacer width="8px"/>
                                        <h:outputText value="Dosis Única"/>
                                    </p:outputPanel>
                                </p:column>

                                <p:column style="text-align: left; width: 6% "
                                          sortBy="#{item.tipoSolucion}" 
                                          filterBy="#{item.tipoSolucion}"  filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Solución" />
                                    </f:facet>
                                    <h:outputText value="#{item.tipoSolucion}" />
                                </p:column>

                                <p:column style="text-align: left; width: 10% "
                                          sortBy="#{item.fechaProgramada}"
                                          filterBy="#{item.fechaProgramada}"  filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Fecha Program." />
                                    </f:facet>
                                    <h:outputText value="#{item.fechaProgramada}"
                                                  styleClass="#{item.prioridad eq 'Alta' ? 'prioridadAlta' : item.prioridad eq 'Media' ? 'prioridadMedia' : item.prioridad eq 'Baja' ? 'prioridadBaja' : null}"  >
                                        <f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
                                    </h:outputText>
                                </p:column>
                                
                                <p:column style="text-align: left; width: 10% "
                                          sortBy="#{item.folio}"          
                                          filterBy="#{item.folio}" filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Folio" />
                                    </f:facet>
                                    <h:outputText value="#{item.folio}" />
                                </p:column>

                                <p:column style="text-align: left; width: 12% " 
                                          sortBy="#{item.nombrePaciente}"
                                          filterBy="#{item.nombrePaciente}" filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Paciente" />
                                    </f:facet>
                                    <h:outputText value="#{item.nombrePaciente}" />
                                </p:column>
                                
                                <p:column style="text-align: left; width: 14% " 
                                           filterBy="#{item.descripcion}" filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Descripción Mezcla" />
                                    </f:facet>
                                    <h:outputText value="#{item.descripcion}" />
                                </p:column>

                                <p:column style="text-align: left; width: 10% " 
                                          sortBy="#{item.nombreEstructura}"
                                          filterBy="#{item.nombreEstructura}" filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Servicio" />
                                    </f:facet>
                                    <h:outputText value="#{item.nombreEstructura}" />
                                </p:column>

                                <p:column style="text-align: left; width: 8% "
                                          sortBy="#{item.cama}"
                                          filterBy="#{item.cama}" filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Ubicación" />
                                    </f:facet>
                                    <h:outputText value="#{item.cama}" />
                                </p:column>

                                <p:column style="text-align: left; width: 10% " 
                                          sortBy="#{item.nombreMedico}" 
                                          filterBy="#{item.nombreMedico}"  filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Médico" />
                                    </f:facet>
                                    <h:outputText value="#{item.nombreMedico}" />
                                </p:column>
                                
                                <p:column style="text-align: left; width: 10% " 
                                          sortBy="#{item.estatusSolucion}" 
                                          filterBy="#{item.estatusSolucion}"  filterMatchMode="contains" >
                                    <f:facet name="header" >
                                        <h:outputText value="Estatus" />
                                    </f:facet>
                                    <h:outputText value="#{item.estatusSolucion}" />
                                </p:column>
                                
                                <p:column style="text-align: left; width: 4% " exportable="false">
                                    <f:facet name="header" >
                                        <h:outputText value="Acciones" />
                                    </f:facet>
                                    <p:commandLink title="Modificar" onclick="PF('statusProcess').show()"
                                                   oncomplete="PF('statusProcess').hide(); PF('modalEditarOrden').show();"
                                                   action="#{registroSolucionMB.verSurtimiento}"
                                                   update=":formEditarOrden"
                                                   disabled="#{!registroSolucionMB.permiso.puedeEditar}">
                                        <f:actionListener binding="#{registroSolucionMB.setSurtimientoExtendedSelected(item)}" />
                                        <i class="fa fa-eye iconMusAzul" style="font-size: large" />
                                    </p:commandLink>
                                    
                                </p:column>
                            </p:dataTable>

                            <p:contextMenu for="tblSurtimientos">
                                <p:menuitem id="btnModificarContext" value="Modificar" icon="ui-icon-pencil"
                                            onclick="PF('statusProcess').show()"
                                            oncomplete="PF('statusProcess').hide(); PF('modalEditarOrden').show();"
                                            actionListener="#{registroSolucionMB.verSurtimiento}"
                                            update=":formEditarOrden"
                                            disabled="#{!registroSolucionMB.permiso.puedeEditar}" />
                            </p:contextMenu>

                        </p:panel>

                    </h:form>
                </div>

                <p:dialog header="ADVERTENCIA" id="idWarning"
                          widgetVar="modalWarning"
                          closeOnEscape="false"  resizable="false"
                          closable="false" 
                          modal="true" style="align-content: center" >
                    <h:form id="formWarning">
                        <div style="height: 50px" align="center" >
                            <h:outputText id="msjWarning" value="#{registroSolucionMB.msjWarning}" escape="false" />
                        </div>
                        <hr/>
                        <p:commandButton value="Cerrar" icon="fa fa-times-circle" onclick="PF('modalWarning').hide()"
                                         style="margin-right: 1px;float: right;" />  
                    </h:form>
                </p:dialog>


                <p:dialog header="#{registroSolucionMB.validaPrescripcion ? 'CAPTURAR PRESCRIPCIÓN' : 'REGISTRAR PRESCRIPCIÓN'}"
                          widgetVar="modalNuevaOrden"
                          closeOnEscape="true"
                          closable="true"
                          width="95%"
                          height="750px" 
                          position="30,10"
                          modal="true" 
                          resizable="false"
                          responsive="true"
                          style="font-size:xx-small !important;">
                    <h:form id="formNuevaOrden">
                        <p:messages id="msgValidaRegistro" globalOnly="false" showDetail="false" closable="true" rendered="#{registroSolucionMB.msjMdlSurtimiento}" />
                        <div class="ui-g">
                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel value="Folio Surtimiento: " rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    <p:outputLabel id="folioSurt" value="#{registroSolucionMB.surtimientoExtendedSelected.folio}" 
                                                   rendered="#{registroSolucionMB.validaPrescripcion}" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel value="Fecha Registro: " rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    <p:outputLabel id="fechaRegistro" class="textoNegrita" title="Fecha de Registro: " 
                                                   value="#{registroSolucionMB.surtimientoExtendedSelected.insertFecha}"
                                                   rendered="#{registroSolucionMB.validaPrescripcion}" >
                                        <f:convertDateTime type="date" pattern="dd/MM/yyyy HH:mm"/>
                                    </p:outputLabel>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel  value="Estatus: " rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    <p:outputLabel id="estatusSurtimiento" class="textoNegrita" title="Estatus del Surtimiento"  
                                                   value="#{registroSolucionMB.surtimientoExtendedSelected.estatusSurtimiento}" 
                                                   rendered="#{registroSolucionMB.validaPrescripcion}" />
                                </div>
                            </div>

                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel for="txtFolioPrescripcion"  value="Folio Prescripción: "/>
                                    <p:inputText id="txtFolioPrescripcion" value="#{registroSolucionMB.surtimientoExtendedSelected.folioPrescripcion}"
                                                 widgetVar="txtFolioPrescripcion"
                                                 size="12" maxlength="20" required="true"
                                                 requiredMessage="Debe ingresar el Folio de la Prescripción"
                                                 placeholder="Folio de Prescripción"
                                                 title="Folio de Prescripción"
                                                 disabled="#{not registroSolucionMB.validaPrescripcion}" >
                                        <p:ajax event="change" listener="#{registroSolucionMB.obtenerDatosSurtimiento('')}" 
                                                onstart="PF('statusProcess').show();" 
                                                oncomplete="PF('statusProcess').hide();"
                                                update=":formNuevaOrden"/>
                                    </p:inputText>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel for="fechaProgramada"  value="Fecha Programada: "/>
                                    <p:calendar id="fechaProgramada" 
                                                value="#{registroSolucionMB.surtimientoExtendedSelected.fechaProgramada}"
                                                showOn="button" locale="es_MX" navigator="true" pattern="dd/MM/yyyy HH:mm"
                                                title="Fecha Programada" mindate="#{registroSolucionMB.fechaActual}"
                                                pages="1" mask="true" showButtonPanel="true" effect="fade" required="true"
                                                requiredMessage="Debe ingresar la Fecha Programada"
                                                disabled="#{!registroSolucionMB.permiso.puedeAutorizar}" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel for="tipoPrescripcion"  value="Tipo Prescripción: "/>
                                    <p:selectOneMenu id="tipoPrescripcion" value="#{registroSolucionMB.surtimientoExtendedSelected.tipoPrescripcion}" label="Tipo de Prescripción"
                                                     title="Tipo de Prescripción" autoWidth="true" style="vertical-align: middle;"
                                                     disabled="#{registroSolucionMB.existePrescripcion}" >
                                        <f:selectItem itemLabel="Seleccione Tipo" itemValue="#{null}"/>
                                        <f:selectItem itemLabel="Normal" itemValue="N" />
                                        <f:selectItem itemLabel="Urgente" itemValue="U" />
                                        <f:selectItem itemLabel="Dosis Única" itemValue="D" />
                                    </p:selectOneMenu>
                                </div>
                            </div>

                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel for="comboServicios"  value="Área/Servicio: "/>
                                    <p:selectOneMenu id="comboServicios" title="Área o Servicio"
                                                     value="#{registroSolucionMB.surtimientoExtendedSelected.idEstructura}"
                                                     autoWidth="true" required="true"
                                                     requiredMessage="Debe seleccionar el Área o Servicio"
                                                     filter="true" filterMatchMode="contains"
                                                     disabled="#{registroSolucionMB.existePrescripcion}"
                                                     style="vertical-align: middle; ">
                                        <f:selectItem itemLabel="Seleccione Área" itemValue="#{null}"/>
                                        <f:selectItems value="#{registroSolucionMB.listServiciosQueSurte}"
                                                       var="servicio"
                                                       itemValue="#{servicio.idEstructura}"
                                                       itemLabel="#{servicio.nombre}" />
                                        <p:ajax event="itemSelect" listener="#{registroSolucionMB.obtenerCamas}" update="comboCamas">
                                        </p:ajax>
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel for="comboCamas"  value="Cama: "/>
                                    <p:selectOneMenu id="comboCamas" title="Cama del Paciente"
                                                     value="#{registroSolucionMB.surtimientoExtendedSelected.idCama}"
                                                     autoWidth="true"
                                                     filter="true" filterMatchMode="contains"
                                                     disabled="#{registroSolucionMB.existePrescripcion}"
                                                     style="vertical-align: middle; ">
                                        <p:ajax event="itemSelect" listener="#{registroSolucionMB.seleccionaCama}" />
                                        <f:selectItem itemLabel="Seleccione Cama" itemValue="#{null}"/>
                                        <f:selectItems value="#{registroSolucionMB.listaCamas}"
                                                       var="cama"
                                                       itemValue="#{cama.idCama}"
                                                       itemLabel="#{cama.nombreCama} - #{cama.ubicacion} " />
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel for="autoCompleteMedico"  value="#{registroSolucionMB.validaPrescripcion ? 'Médico Solicitante: ' : 'Médico Prescribe: '}"/>
                                    <p:autoComplete id="autoCompleteMedico" 
                                                    value="#{registroSolucionMB.medico}" 
                                                    required="true"
                                                    requiredMessage="Debe seleccionar el Médico"
                                                    completeMethod="#{registroSolucionMB.autoCompleteMedicos}" 
                                                    minQueryLength="3" 
                                                    forceSelection="true"
                                                    var="medico" 
                                                    itemValue="#{medico.idUsuario}" 
                                                    itemLabel="#{medico.nombre} #{medico.apellidoPaterno} #{medico.apellidoMaterno}"
                                                    converter="medicoConverter" 
                                                    placeholder="Buscar Médico..."
                                                    emptyMessage="Búsqueda sin resultados" 
                                                    size="25" title="Médico Solicitante"
                                                    disabled="#{registroSolucionMB.existePrescripcion}"
                                                    scrollHeight="200">
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Cédula Profesional" />
                                            </f:facet>
                                            <h:outputText value="#{medico.cedProfesional}" style=" font-size: small;" />
                                        </p:column>
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Nombre" />
                                            </f:facet>
                                            <h:outputText value="#{medico.nombre}" style=" font-size: small; font-weight: bolder;" />
                                        </p:column>
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Apellido Paterno" />
                                            </f:facet>
                                            <h:outputText value="#{medico.apellidoPaterno}" style=" font-size: small; font-weight: bolder;" />
                                        </p:column>
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Apellido Materno" />
                                            </f:facet>
                                            <h:outputText value="#{medico.apellidoMaterno}" style=" font-size: small; font-weight: bolder;" />
                                        </p:column>
                                    </p:autoComplete>
                                    <p:commandButton id="agregaMedico" title="Agregar" value="+" 
                                                     actionListener="#{registroSolucionMB.mostrarModalAgregarMedico}"
                                                     onclick="PF('statusProcess').show();"
                                                     oncomplete="PF('statusProcess').hide();PF('modalAgregarMedico').show();"
                                                     update=":formAgregarMedico:turnoMedico"
                                                     disabled="#{registroSolucionMB.existePrescripcion}"
                                                     rendered="#{registroSolucionMB.permiso.puedeAutorizar}" >
                                        <p:resetInput target="formAgregarMedico"/>
                                    </p:commandButton>
                                </div>
                            </div>

                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel for="autoCompletePaciente"  value="Paciente: "/>
                                    <p:autoComplete id="autoCompletePaciente" 
                                                    value="#{registroSolucionMB.pacienteExtended}" 
                                                    completeMethod="#{registroSolucionMB.autoCompletePacientes}" 
                                                    minQueryLength="3" required="true"
                                                    requiredMessage="Debe seleccionar el Paciente"
                                                    forceSelection="true"
                                                    var="paciente"  
                                                    itemValue="#{paciente}"
                                                    itemLabel="#{paciente.nombreCompleto} #{paciente.apellidoPaterno} #{paciente.apellidoMaterno}"
                                                    converter="pacienteConverter" 
                                                    placeholder="Buscar Paciente..."
                                                    emptyMessage="Búsqueda sin resultados" 
                                                    title="Nombre del Paciente"
                                                    disabled="#{registroSolucionMB.existePrescripcion}"
                                                    size="25" scrollHeight="200">
                                        <p:ajax event="itemSelect" listener="#{registroSolucionMB.selectPaciente}" 
                                                update="txtNumPaciente, txtDiagnosticos, txtFecNacPaciente, txtEdadPaciente, txtFecNacPaciente, txtPesoPaciente, txtTallaPaciente, txtAreaPaciente, chkDiabetes, chkHipertension, chkProRenales, chkPadeCronico" />
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Número Expediente" />
                                            </f:facet>
                                            <h:outputText value="#{paciente.pacienteNumero}" style=" font-size: small;" />
                                        </p:column>
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Clave DerechoHabiencia" />
                                            </f:facet>
                                            <h:outputText value="#{paciente.claveDerechohabiencia}" style=" font-size: small;" />
                                        </p:column>
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Nombre" />
                                            </f:facet>
                                            <h:outputText value="#{paciente.nombreCompleto}" style=" font-size: small; font-weight: bolder;" />
                                        </p:column>
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Apellido Paterno" />
                                            </f:facet>
                                            <h:outputText value="#{paciente.apellidoPaterno}" style=" font-size: small; font-weight: bolder;" />
                                        </p:column>
                                        <p:column style="font-size: small;">
                                            <f:facet name="header" >
                                                <h:outputText value="Apellido Materno" />
                                            </f:facet>
                                            <h:outputText value="#{paciente.apellidoMaterno}" style=" font-size: small; font-weight: bolder;" />
                                        </p:column>
                                    </p:autoComplete>
                                    <p:commandButton id="agregaPaciente" title="Agregar" value="+" 
                                                     onclick="PF('statusProcess').show();" immediate="true"
                                                     actionListener="#{registroSolucionMB.mostrarModalAgregarPaciente}"
                                                     oncomplete="PF('statusProcess').hide();PF('modalAgregarPaciente').show();"
                                                     update="formAgregarPaciente"
                                                     disabled="#{registroSolucionMB.existePrescripcion}">
                                        <p:resetInput target="formAgregarPaciente"/>
                                    </p:commandButton>
                                </div>

                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel  value="No. Expediente: "/>
                                    <p:outputLabel id="txtNumPaciente" value="#{registroSolucionMB.pacienteExtended.pacienteNumero}" title="Número del Paciente">
                                    </p:outputLabel>
                                </div>

                                <div class="ui-g-12 ui-md-6 ui-lg-4">
                                    <p:outputLabel for="tipoConsulta" style="margin-right: 1px;" value="Tipo Consulta: "/>
                                    <p:selectOneMenu id="tipoConsulta" value="#{registroSolucionMB.surtimientoExtendedSelected.tipoConsulta}" title="Tipo de la Consulta" autoWidth="true" 
                                                     style="vertical-align: middle;" disabled="#{registroSolucionMB.existePrescripcion}" required="true" requiredMessage="Debe seleccionar el Tipo de Consulta">
                                        <f:selectItem itemLabel="Seleccione Tipo" itemValue="#{null}"/>
                                        <f:selectItem value="#{I}" itemLabel="Hospitalización" itemValue="I" />
                                        <f:selectItem value="#{E}" itemLabel="Ambulatoria" itemValue="E" />
                                    </p:selectOneMenu>
                                </div>
                            </div>

                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel style="margin-right: 1px;" value="Fecha Nacimiento: " />
                                    <p:outputLabel id="txtFecNacPaciente" class="textoNegrita" 
                                                   value="#{registroSolucionMB.pacienteExtended.fechaNacimiento}" >
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </p:outputLabel>
                                    <p:outputLabel value=" (" />
                                    <p:outputLabel id="txtEdadPaciente" value="#{registroSolucionMB.pacienteExtended.edadPaciente}" />
                                    <p:outputLabel value=" años)" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel style="margin-right: 1px;" value="Peso: " />
                                    <p:inputText id="txtPesoPaciente" size="1"
                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.pesoPaciente}"
                                                 required="true" requiredMessage="Registre peso" >
                                        <p:keyFilter mask="num" />
                                        <p:ajax event="change" update="txtAreaPaciente" listener="#{registroSolucionMB.obtenerSuperficieCorporal()}" />
                                    </p:inputText>
                                    <p:outputLabel value=" kg" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel style="margin-right: 1px;" value="Estatura: " />
                                    <p:inputText id="txtTallaPaciente" size="1"
                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.tallaPaciente}" 
                                                 required="true" requiredMessage="Registre estatura" >
                                        <p:keyFilter mask="num" />
                                        <p:ajax event="change" update="txtAreaPaciente" listener="#{registroSolucionMB.obtenerSuperficieCorporal()}" />
                                    </p:inputText>
                                    <p:outputLabel value=" mts" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel style="margin-right: 1px;" value="#{msg['cenmez.areaCorp']}: " />
                                    <p:inputText id="txtAreaPaciente" size="1"
                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.areaCorporal}" 
                                                 required="true" requiredMessage="Registre superficies corporal" >
                                        <p:keyFilter mask="num" />
                                    </p:inputText>
                                    <p:outputLabel value=" m²" />
                                </div>
                            </div>

                            <div class="ui-g-12" >                                    
                                <div class="ui-g-12 ui-md-6 ui-lg-6">
                                    <p:outputLabel value="Diagnósticos: * " style="margin-right: 1px; vertical-align: top; "/>
                                    <p:autoComplete id="txtDiagnosticos"
                                                    styleClass="autocomplete-multiple-hiper"
                                                    multiple="true" required="true" requiredMessage="Se requiere al menos un diagnóstico"
                                                    placeholder="Agregar Diagnósticos" 
                                                    value="#{registroSolucionMB.listaDiagnosticos}"
                                                    completeMethod="#{registroSolucionMB.autocompleteDiagnosticos}"
                                                    minQueryLength="4"                                                       
                                                    forceSelection="true"
                                                    var="diagnos" 
                                                    itemLabel="#{diagnos.nombre}" itemValue="#{diagnos}" 
                                                    converter="musGenericConverter" >
                                        <p:ajax event="itemSelect" update="txtDiagnosticos" process="txtDiagnosticos"></p:ajax>
                                        <p:column style="width: 20px; font-size: small;" width="50px">
                                            <f:facet name="header" >
                                                <h:outputText value="Clave" />
                                            </f:facet>
                                            <h:outputText value="#{diagnos.clave}" style=" font-size: small;" />
                                        </p:column>
                                        <p:column style="width: 600px; font-size: small;" width="600px">
                                            <f:facet name="header" >
                                                <h:outputText value="Descripción" />
                                            </f:facet>
                                            <h:outputText value="#{diagnos.nombre}" style=" font-size: x-small;" />
                                        </p:column>
                                    </p:autoComplete>
                                </div>

                                <div class="ui-g-12 ui-md-6 ui-lg-2">
                                    <p:outputLabel style="margin-right: 1px;" value="Prob Glucosa: " />
                                    <p:selectBooleanCheckbox value="#{registroSolucionMB.surtimientoExtendedSelected.diabetes}" 
                                                             id="chkDiabetes" />
                                </div>

                                <div class="ui-g-12 ui-md-6 ui-lg-2">
                                    <p:outputLabel style="margin-right: 1px;" value="Prob Renales: " />
                                    <p:selectBooleanCheckbox value="#{registroSolucionMB.surtimientoExtendedSelected.problemasRenales}" 
                                                             id="chkProRenales" />
                                </div>

                                <div class="ui-g-12 ui-md-6 ui-lg-2">
                                    <p:outputLabel style="margin-right: 1px;" value="Prob Hipertensión: " />
                                    <p:selectBooleanCheckbox value="#{registroSolucionMB.surtimientoExtendedSelected.hipertension}" 
                                                             id="chkHipertension" />
                                </div>

                                <div class="ui-g-12 ui-md-6 ui-lg-2">
                                    <p:outputLabel style="margin-right: 1px;" value="Padec crónico: "  rendered="false" />
                                    <p:selectBooleanCheckbox value="#{registroSolucionMB.surtimientoExtendedSelected.padecimientoCronico}" 
                                                             id="chkPadeCronico"  rendered="false" />
                                </div>
                            </div>

                            <p:outputLabel value="INFORMACIÓN DE LA SOLUCIÓN"  class="plabel ui-g-12" />

                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel for="tipoSolucion"  value="Tipo Solución: " />
                                    <p:selectOneMenu id="tipoSolucion" style="vertical-align: middle;" title="Tipo de Solución" 
                                                     value="#{registroSolucionMB.idTipoSolucion}" label="Tipo de Solución"
                                                     required="true" requiredMessage="Debe seleccionar una opción"
                                                     filter="true" filterMatchMode="contains" >
                                        <f:selectItem itemLabel="Seleccione Tipo" itemValue="#{null}"/>
                                        <f:selectItems value="#{registroSolucionMB.tipoSolucionList}" var="tipoSol"
                                                       itemLabel="#{tipoSol.clave}" itemValue="#{tipoSol.idTipoSolucion}"/>
                                        <p:ajax event="itemSelect" update="protocolo txtDiagnostico "
                                                listener="#{registroSolucionMB.seleccionaTiposolucion}">
                                        </p:ajax>
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel for="viaAdministracion"  value="Vía Administración: "/>
                                    <p:selectOneMenu id="viaAdministracion" style="vertical-align: middle; " 
                                                     value="#{registroSolucionMB.viaAdministracion.idViaAdministracion}"
                                                     label="Vía de Administración" title="Vía de Administración" autoWidth="true" 
                                                     required="true" requiredMessage="Debe seleccionar una Vía de Administración" 
                                                     filter="true" filterMatchMode="contains">
                                        <f:selectItem itemLabel="Seleccione Vía" itemValue="#{null}"/>
                                        <f:selectItems value="#{registroSolucionMB.viaAdministracionList}" var="via"
                                                       itemLabel="#{via.nombreViaAdministracion}" itemValue="#{via.idViaAdministracion}"/>
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel style="margin-right: 1px;" value="Volumen total: "
                                                   rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    <p:inputMask id="txtVolumenMezcla" label="Volumen" mask="99999.00" size="1"
                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.volumenTotal}"
                                                 rendered="false" >
                                        <f:validateLength minimum="0" maximum="8"/>
                                        <p:ajax event="blur" process="@this" update="txtVelocidad" 
                                                listener="#{registroSolucionMB.asignaVelocidad}"/>
                                    </p:inputMask>
                                    <p:inputText size="4"  style="margin-bottom: 5px;"
                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.volumenTotal}"
                                                 rendered="#{registroSolucionMB.validaPrescripcion}" >
                                        <p:keyFilter regEx="/[0-9.]/i" />
                                        <p:ajax event="blur" process="@this" update="txtVelocidad" 
                                                listener="#{registroSolucionMB.asignaVelocidad}"/>
                                    </p:inputText>
                                    <p:outputLabel value=" ml" rendered="#{registroSolucionMB.validaPrescripcion}" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel style="margin-right: 1px;" value="Contenedor: " rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    <p:selectOneMenu id="cmbIdContenedor" value="#{registroSolucionMB.surtimientoExtendedSelected.idContenedor}" 
                                                     rendered="#{registroSolucionMB.validaPrescripcion}"
                                                     filter="true" filterMatchMode="contains" placeholder="Seleccione un contenedor" >
                                        <f:selectItem itemLabel="Seleccione una opción" itemValue="#{null}"/>
                                        <f:selectItems value="#{registroSolucionMB.envaseList}" var="tipo" 
                                                       itemLabel="#{tipo.descripcion}" itemValue="#{tipo.idEnvaseContenedor}" />
                                        <p:ajax event="change" listener="#{registroSolucionMB.validarNuevaOrden}" 
                                                onstart="PF('statusProcess').show();" oncomplete="PF('statusProcess').hide();"
                                                update="txtCondicionesConser "/>
                                    </p:selectOneMenu>
                                </div>
                            </div>

                            <div class="ui-g-12" >
                                <ui:remove>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel value="Fecha de Entrega: " for="txtFechaEntrega" /> 
                                    <p:calendar id="txtFechaEntrega" 
                                                value="#{registroSolucionMB.surtimientoExtendedSelected.fechaParaEntregar}"
                                                showOn="button" locale="es_MX" navigator="true" pattern="dd/MM/yyyy"
                                                title="Fecha Programada" 
                                                pages="1" mask="true" showButtonPanel="true" effect="fade" 
                                                size="8" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel value="Hora de Entrega: " for="txtHoraEntrega" /> 
                                    <p:selectOneMenu id="txtHoraEntrega" style="vertical-align: middle;" 
                                                     value="#{registroSolucionMB.surtimientoExtendedSelected.idHorarioParaEntregar}" 
                                                     label="Hora de Entrega" filter="true" filterMatchMode="contains" 
                                                     title="Hora de Entrega" autoWidth="true" >
                                        <f:selectItem itemLabel="Seleccione horario" itemValue="#{null}"/>
                                        <f:selectItems value="#{registroSolucionMB.horarioEntregaLista}" var="horar" 
                                                       itemValue="#{horar.idHorarioEntrega}" itemLabel="#{horar.nombre}" />
                                    </p:selectOneMenu>
                                </div>
                                </ui:remove>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel for="chkPerfucionContinua" style="margin-right: 1px;" value="Perfusión Continua: "/>
                                    <p:selectBooleanCheckbox id="chkPerfucionContinua" 
                                                             value="#{registroSolucionMB.surtimientoExtendedSelected.perfusionContinua}" >
                                        <p:ajax event="change" update="chkPerfucionContinua" 
                                                listener="#{registroSolucionMB.activaPerfusion}" />
                                    </p:selectBooleanCheckbox>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel style="margin-right: 5px;" value="Tiempo Infusión: "/>
                                        <!-- p:inputNumber id="txtHorasInfusion" maxlength="2" maxValue="99" minValue="0" size="4"
                                                       value="# {registroSolucionMB.surtimientoExtendedSelected.horasInfusion}" 
                                                       disabled="# {!registroSolucionMB.editarHoraInfusion}">
                                            <p:ajax event="blur" update="txtVelocidad" 
                                                listener="# {registroSolucionMB.calculaVelocidadPerfusion}" />
                                        </p:inputNumber -->                                        
                                        <p:calendar id="dateHorasInfusion" value="#{registroSolucionMB.surtimientoExtendedSelected.horasInfusion}" pattern="HH:mm" timeOnly="true"
                                                    maxHour="72" maxMinute="59" size="4" > 
                                                    <p:ajax event="blur" process="@this" update="txtVelocidad" 
                                                listener="#{registroSolucionMB.calculaVelocidadPerfusion}" />
                                        </p:calendar>
                                        <p:outputLabel value=" hrs" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel for="txtVelocidad" style="margin-right: 1px;" value="Velocidad: "/>
                                    <p:inputNumber id="txtVelocidad" value="#{registroSolucionMB.surtimientoExtendedSelected.velocidad}" minValue="0" decimalSeparator="." thousandSeparator="," decimalPlaces="2" size="10" 
                                                   title="Velocidad de Administración" 
                                                   disabled="#{!registroSolucionMB.surtimientoExtendedSelected.perfusionContinua}" />
                                    <p:outputLabel value=" ml/h" rendered="#{registroSolucionMB.validaPrescripcion}" />
                                </div>
                            </div>                            
                            <div class="ui-g-12">
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel for="protocolo" style="margin-right: 1px;" value="Protocolo: "/>
                                    <p:selectOneMenu id="protocolo" value="#{registroSolucionMB.claveProtocolo}" label="Protocolo" filter="true" filterMatchMode="contains"
                                                     title="Tipo de Protocolo" autoWidth="true" style="vertical-align: middle;" 
                                                     disabled="#{!registroSolucionMB.isOncologica}" >
                                        <f:selectItem itemLabel="Seleccione Protocolo" itemValue="#{0}"/>
                                        <f:selectItems value="#{registroSolucionMB.listaProtocolos}" var="proto" 
                                                       itemValue="#{proto.claveProtocolo}" itemLabel="#{proto.claveProtocolo}" />
                                        <p:ajax event="itemSelect" update="formWarning:msjWarning txtDiagnostico"
                                                listener="#{registroSolucionMB.obtenerProtocoloSeleccionado}">
                                        </p:ajax>
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel for="txtDiagnostico" style="margin-right: 1px;" value="Diagnóstico: "/>
                                    <p:autoComplete id="txtDiagnostico"
                                                    styleClass="autocomplete-multiple-hiper"
                                                    multiple="false"
                                                    placeholder="Buscar Diagnóstico" 
                                                    value="#{registroSolucionMB.diagnosticoSelected}"
                                                    completeMethod="#{registroSolucionMB.autocompleteDiagnostico}"
                                                    minQueryLength="4"                                                       
                                                    forceSelection="true"                                                         
                                                    var="diagnos" size ="20"
                                                    itemLabel="#{diagnos.nombre}" itemValue="#{diagnos}" 
                                                    converter="musGenericConverter" 
                                                    disabled="#{!registroSolucionMB.isOncologica}">
                                        <p:column style="width: 20px; font-size: small;" width="50px">
                                            <f:facet name="header" >
                                                <h:outputText value="Clave" />
                                            </f:facet>
                                            <h:outputText value="#{diagnos.clave}" style=" font-size: small;" />
                                        </p:column>
                                        <p:column style="width: 600px; font-size: small;" width="600px">
                                            <f:facet name="header" >
                                                <h:outputText value="Descripción" />
                                            </f:facet>
                                            <h:outputText value="#{diagnos.nombre}" style=" font-size: x-small;" />
                                        </p:column>
                                        <p:ajax event="itemSelect" update="formWarning:msjWarning"
                                                listener="#{registroSolucionMB.validaDiagnosticoProtocolo}">
                                        </p:ajax>
                                    </p:autoComplete>
                                </div>
                            </div>

                            <div class="ui-g-12" style="padding: 10px 5px; background-color: #bfbfbf; margin-right:20px;">
                                <div style="width: 5%; float:left;">
                                    <p:inputText id="xcantidad"
                                                 value="#{registroSolucionMB.xcantidad}"
                                                 size="3" rendered="false"
                                                 title="Cantidad de medicamentos">
                                        <p:keyFilter regEx="/[0-9]{1,4}/i" />
                                        <p:ajax event="keyup" update="@this" />
                                    </p:inputText>
                                </div>
                                <div style="width: 40%; float:left;">
                                    <p:autoComplete id="txtInsumo" 
                                                    value="#{registroSolucionMB.medicamento}" 
                                                    completeMethod="#{registroSolucionMB.autoCompleteMedicamentos}"
                                                    minQueryLength="4" 
                                                    forceSelection="true"
                                                    var="insumo" 
                                                    itemLabel="#{insumo.nombreCorto}" 
                                                    itemValue="#{insumo}" 
                                                    converter="medicamentoExtHashConverter"
                                                    placeholder="Buscar Insumo"
                                                    scrollHeight="250"
                                                    emptyMessage="No se encontro registro."
                                                    size="65">
                                        <p:ajax event="itemSelect" 
                                                process="txtInsumo, lblUnidad" 
                                                update="txtInsumo, lblUnidad, dosis, frecuencia, duracion" />
                                        <p:column style="width: 20px; font-size: small;" width="20px">
                                            <f:facet name="header" >
                                                <h:outputText value="Clave Institucional" />
                                            </f:facet>
                                            <h:outputText value="#{insumo.claveInstitucional}" style=" font-size: small;" />
                                        </p:column>
                                        <p:column style="width: 350px; font-size: small;" width="350px">
                                            <f:facet name="header" >
                                                <h:outputText value="Descripción" />
                                            </f:facet>
                                            <h:outputText value="#{insumo.nombreCorto}" style=" font-size: x-small;" />
                                        </p:column>
                                        <p:column style="width: 180px; font-size: small;" width="350px">
                                            <f:facet name="header" >
                                                <h:outputText value="Almacén" />
                                            </f:facet>
                                            <h:outputText value="#{insumo.nombreEstructura}" style=" font-size: x-small;" />
                                        </p:column>
                                        <p:column style="width: 120px; font-size: small;" width="350px">
                                            <f:facet name="header" >
                                                <h:outputText value="Cant. Disponible" />
                                            </f:facet>
                                            <h:outputText value="#{insumo.cantidadDisponible}" style=" font-size: x-small;" />
                                        </p:column>
                                    </p:autoComplete>
                                </div>
                                <div style="width: 15%; float:left;">
                                    <p:outputLabel for="dosis" style="margin-right: 1px;">Cant/Dosis:</p:outputLabel>
                                    <p:inputNumber id="dosis" style="margin-right: 1px;" value="#{registroSolucionMB.dosis}" minValue="0" decimalSeparator="." thousandSeparator="," decimalPlaces="2" size="6" title="Cant/Dosis"></p:inputNumber>
                                    <p:outputLabel id="lblUnidad">#{registroSolucionMB.medicamento.nombreUnidadConcentracion}</p:outputLabel>
                                </div>
                                <div style="width: 20%; float:left;">
                                    <p:outputLabel for="frecuencia" style="margin-right: 1px;">Frecuencia:</p:outputLabel>
                                    <p:selectOneMenu id="frecuencia" value="#{registroSolucionMB.frecuencia}" label="Frecuencia" filter="true" filterMatchMode="contains"
                                                     title="Frecuencia" autoWidth="true" style="vertical-align: middle;">
                                        <f:selectItem itemLabel="Seleccione Frecuencia" itemValue="#{null}"/>
                                        <f:selectItems value="#{registroSolucionMB.listaFrecuencias}" var="frec" itemValue="#{frec.frecuencia}" itemLabel="#{frec.nombre} - #{frec.frecuencia} hr(s)"></f:selectItems>
                                    </p:selectOneMenu>
                                </div>
                                <div style="width: 13%; float:left;">
                                    <p:outputLabel for="duracion" style="margin-right: 1px;">Duración:</p:outputLabel>
                                    <p:inputNumber id="duracion" value="#{registroSolucionMB.duracion}" minValue="0" maxValue="90" decimalPlaces="0" size="4" title="Duración"></p:inputNumber>
                                    días
                                </div>
                                <div style="width: 7%; float: right;">
                                    <p:commandButton value="Agregar" styleClass="btnMusAzul" style="float: right;"
                                                     actionListener="#{registroSolucionMB.agregarMedicamento}"
                                                     update="msgValidaRegistro, txtInsumo, dosis, frecuencia, duracion, tblInsumos, txtInsumo, lblUnidad, txtCondicionesConser "
                                                     onstart="PF('statusProcess').show();" 
                                                     oncomplete="PF('statusProcess').hide();" />
                                </div>
                            </div>

                            <p:dataTable id="tblInsumos"
                                         widgetVar="tblInsumos" 
                                         value="#{registroSolucionMB.surtimientoInsumoExtendedList}"                                   
                                         var="item"
                                         rowIndexVar="row"
                                         style="margin-top:0px; margin-bottom:5px; width:98%;"
                                         styleClass="mystyle"
                                         scrollable="true" scrollHeight="120"
                                         emptyMessage="No hay insumos capturados"
                                         reflow="true"
                                         paginator="false"
                                         rows="0"
                                         disabledSelection="true">

                                <p:column style="text-align: left; width: 10%"
                                          sortBy="#{item.claveInstitucional}" >
                                    <f:facet name="header" >
                                        <h:outputText value="Clave" />
                                    </f:facet>
                                    <h:outputText value="#{item.claveInstitucional}" class="textoNegrita" />
                                </p:column>
                                <p:column style="text-align: left; width: 60%"
                                          sortBy="#{item.nombreCorto}" >
                                    <f:facet name="header" >
                                        <h:outputText value="Insumo" />
                                    </f:facet>
                                    <h:outputText value="#{item.nombreCorto}" />
                                </p:column>
                                <p:column style="text-align: left; width: 10%">
                                    <f:facet name="header" >
                                        <h:outputText value="Dosis" />
                                    </f:facet>
                                    <h:outputText value="#{item.dosis} #{item.unidadConcentracion}" />
                                </p:column>
                                <p:column style="text-align: left; width: 6%">
                                    <f:facet name="header" >
                                        <h:outputText value="Frecuencia" />
                                    </f:facet>
                                    <h:outputText value="#{item.frecuencia}" />
                                </p:column>
                                <p:column style="text-align: left; width: 5%">
                                    <f:facet name="header" >
                                        <h:outputText value="Duración" />
                                    </f:facet>
                                    <h:outputText value="#{item.duracion}" />
                                </p:column>
                                <p:column style="text-align: left; width: 5%">
                                    <f:facet name="header" >
                                        <h:outputText value="Cant Req" />
                                    </f:facet>
                                    <h:outputText value="#{item.cantidadSolicitada}" class="textoNegrita" />
                                </p:column>
                                <p:column style="text-align: left; width: 4%">
                                    <f:facet name="header">
                                        <h:outputText value="Eliminar" />
                                    </f:facet>
                                    <p:commandLink title="Eliminar" onclick="PF('statusProcess').show()"
                                                   oncomplete="PF('statusProcess').hide();"
                                                   actionListener="#{registroSolucionMB.eliminaInsumoDeLista(item)}"
                                                   update="formNuevaOrden:tblInsumos">
                                        <i class="fa fa-trash iconMusRojo" />
                                    </p:commandLink>
                                </p:column>
                            </p:dataTable>
                            <br/>

                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-6">
                                    <p:outputLabel style="margin-right: 1px; font-weight: bold;" value="Observaciones: " rendered="#{registroSolucionMB.validaPrescripcion}" /><br/>
                                    <p:inputTextarea id="txtCondicionesConser" value="#{registroSolucionMB.surtimientoExtendedSelected.observaciones}" rows="4" cols="80" style="margin-bottom: 5px;" rendered="#{registroSolucionMB.validaPrescripcion}" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-6">
                                    <ui:remove>
                                    <p:spacer width="5"/>
                                    <p:outputLabel style="margin-right: 1px; font-weight: bold;" value="Motivo Rechazo " rendered="#{registroSolucionMB.validaPrescripcion}" /><br/>
                                    <p:outputLabel style="margin-right: 1px; font-weight: bold;" value="#{registroSolucionMB.surtimientoExtendedSelected.observaciones}" rendered="#{registroSolucionMB.validaPrescripcion}" /><br/>
                                    <p:outputLabel style="margin-right: 1px; font-weight: bold;" value="Instrucciones de Preparación: " rendered="#{registroSolucionMB.validaPrescripcion}" /><br/>
                                    <p:inputTextarea id="txtInstruccionesPrep"  value="#{registroSolucionMB.surtimientoExtendedSelected.instruccionPreparacion}" rows="4" cols="80" rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    </ui:remove>
                                </div>
                                
                            </div>

                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-9">
                                    <p:selectBooleanCheckbox id="chkTemRefrigeracion" 
                                                             value="#{registroSolucionMB.surtimientoExtendedSelected.tempRefrigeracion}" 
                                                             itemLabel="Temp. Refrigeración" 
                                                             rendered="#{registroSolucionMB.validaPrescripcion}"  />
                                    <p:selectBooleanCheckbox id="chkTemAmbiente" 
                                                             value="#{registroSolucionMB.surtimientoExtendedSelected.tempAmbiente}" 
                                                             itemLabel="Temp. Ambiente" 
                                                             rendered="#{registroSolucionMB.validaPrescripcion}"  />
                                    <p:selectBooleanCheckbox id="chkProteccionLuz" 
                                                             value="#{registroSolucionMB.surtimientoExtendedSelected.proteccionLuz}" 
                                                             itemLabel="Protección de Luz" 
                                                             rendered="#{registroSolucionMB.validaPrescripcion}"  />
                                    <p:selectBooleanCheckbox id="chkNoAgitar" 
                                                             value="#{registroSolucionMB.surtimientoExtendedSelected.noAgitar}" 
                                                             itemLabel="No agitar" 
                                                             rendered="#{registroSolucionMB.validaPrescripcion}"  />
                                </div>
                            </div>

                            <div class="ui-g-12" style=" width: 100% !important; /*position: absolute; bottom: 0px;*/ background-color: #f8f8f8; border-top: solid 2px #C8C8C8;  " >
                                <div class="ui-g-12 ui-md-6 ui-lg-4" style="display: flex; align-content: center; justify-content: space-between; float: right;" >
                                    <div >
                                        <p:commandButton value="Cerrar" icon="fa fa-times-circle"  onclick="PF('modalNuevaOrden').hide();" /> 
                                    </div>
                                    <div >
                                        <p:commandButton value="Cancelar" immediate="true"
                                                         styleClass="btnMusRed" 
                                                         icon="fa fa-times-circle" 
                                                         onmousedown ="$('#formNuevaOrden\\:txtFolioPrescripcion').removeAttr('onblur');"
                                                         onclick="PF('modalNuevaOrden').hide();"
                                                         style="margin-right: 1px; float: right;" />
                                    </div>
                                    <div >
                                        <p:commandButton value="Registrar"
                                                         icon="fa fa-check-circle" 
                                                         onclick="PF('statusProcess').show()"
                                                         oncomplete="PF('statusProcess').hide(); if (args.estatus) { PF('modalNuevaOrden').hide();}"
                                                         actionListener="#{registroSolucionMB.registrarOrden}" 
                                                         styleClass="btnMusAzul" 
                                                         update=":mainForm:tblSurtimientos, :formNuevaOrden:msgValidaRegistro" /> 
                                    </div>
                                </div>
                            </div>

                        </div>
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                        </p:confirmDialog>
                    </h:form>
                </p:dialog>
                
                <p:dialog header="#{registroSolucionMB.validaPrescripcion ? 'VALIDAR PRESCRIPCIÓN' : 'CAPTURAR PRESCRIPCIÓN'}"
                          widgetVar="modalEditarOrden"
                          closeOnEscape="true"
                          closable="true"
                          width="95%"
                          height="650px" 
                          position="30,10"
                          modal="true" 
                          resizable="false"
                          responsive="true"
                          style="font-size:xx-small !important;">
                        <h:form id="formEditarOrden">
                            <p:messages id="msgValidaEdicion" globalOnly="false" showDetail="false" closable="true" rendered="#{registroSolucionMB.msjMdlSurtimiento}" />
                            <div class="ui-g">
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel style="margin-right: 1px;" 
                                                       value="Folio Surtimiento: " 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}" />
                                        <p:outputLabel id="folioSurt" class="textoNegrita"
                                                       value="#{registroSolucionMB.surtimientoExtendedSelected.folio}" 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel style="margin-right: 1px;" value="Fecha Registro: " 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}"/>
                                        <p:outputLabel id="fechaRegistro" title="Fecha de Registro" class="textoNegrita"
                                                       value="#{registroSolucionMB.surtimientoExtendedSelected.insertFecha}" 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}" >
                                            <f:convertDateTime type="date" pattern="dd/MM/yyyy HH:mm"/>
                                        </p:outputLabel>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel style="margin-right: 1px;" value="Estatus: " 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}" />
                                        <p:outputLabel id="estatusSurtimiento" title="Estatus del Surtimiento" class="textoNegrita"
                                                       value="#{registroSolucionMB.surtimientoExtendedSelected.estatusSolucion}" 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    </div>
                                </div>
                                
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel style="margin-right: 1px;" 
                                                       value="Folio Prescripción: " />
                                        <p:outputLabel id="txtFolioPrescripcion" title="Folio de Prescripción"
                                                       value="#{registroSolucionMB.surtimientoExtendedSelected.folioPrescripcion}" />
                                    </div>
                                    
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel for="fechaProgramada" style="margin-right: 1px;" value="Fecha Programada: "/>
                                        <p:calendar id="fechaProgramada" title="Fecha Programada"
                                                    value="#{registroSolucionMB.surtimientoExtendedSelected.fechaProgramada}"
                                                    showOn="button" locale="es_MX" navigator="true" pattern="dd/MM/yyyy HH:mm" 
                                                    requiredMessage="Ingrese fecha programada"
                                                    disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" />
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel for="tipoPrescripcion" style="margin-right: 1px;" value="Tipo Prescripción: " />
                                        <p:selectOneMenu id="tipoPrescripcion" style="vertical-align: middle;"
                                                         value="#{registroSolucionMB.surtimientoExtendedSelected.tipoPrescripcion}" 
                                                         label="Tipo de Prescripción" title="Tipo de Prescripción" autoWidth="true" 
                                                         required="true" requiredMessage="Debe seleccionar un Tipo de Prescripción"
                                                         disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <f:selectItem itemLabel="Seleccione Tipo" itemValue="#{null}"/>
                                            <f:selectItem value="#{N}" itemLabel="Normal" itemValue="N" />
                                            <f:selectItem value="#{U}" itemLabel="Urgente" itemValue="U" />
                                            <f:selectItem value="#{D}" itemLabel="Dosis Única" itemValue="D" />
                                        </p:selectOneMenu>
                                    </div>
                                </div>
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-4" >
                                        <p:outputLabel style="margin-right: 1px;" value="Usuario autoriza: " rendered="#{registroSolucionMB.verAutorizacion}" />
                                        <p:outputLabel id="usuarioAutoriza" class="textoNegrita"
                                                       value="#{registroSolucionMB.surtimientoExtendedSelected.usuarioAutoriza}" 
                                                       rendered="#{registroSolucionMB.verAutorizacion}" />
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel style="margin-right: 1px;" value="Fecha Autorización: " rendered="#{registroSolucionMB.verAutorizacion}"/>
                                        <p:outputLabel id="fechaAutorizacion" class="textoNegrita"
                                                       value="#{registroSolucionMB.surtimientoExtendedSelected.fechaAutoriza}" 
                                                       rendered="#{registroSolucionMB.verAutorizacion}" >
                                            <f:convertDateTime type="date" pattern="dd/MM/yyyy HH:mm"/>
                                        </p:outputLabel>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel style="margin-right: 1px;" value="Comentarios autorización: " rendered="#{registroSolucionMB.verAutorizacion}" />
                                        <p:outputLabel id="comentariosAutoriza" class="textoNegrita"
                                                       value="#{registroSolucionMB.surtimientoExtendedSelected.comentarioAutoriza}" 
                                                       rendered="#{registroSolucionMB.verAutorizacion}" />
                                    </div>
                                </div>
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel for="comboServicios" style="margin-right: 1px;" value="Área/Servicio: " />
                                        <p:selectOneMenu id="comboServicios" title="Área o Servicio" style="vertical-align: middle;"
                                                         value="#{registroSolucionMB.surtimientoExtendedSelected.idEstructura}"
                                                         autoWidth="true" required="true" requiredMessage="Seleccione Área o Servicio"
                                                         filter="true" filterMatchMode="contains"
                                                         disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <f:selectItem itemLabel="Seleccione Área" itemValue="#{null}"/>
                                            <f:selectItems value="#{registroSolucionMB.listServiciosQueSurte}"
                                                           var="servicio"
                                                           itemValue="#{servicio.idEstructura}"
                                                           itemLabel="#{servicio.nombre}"
                                                           />
                                            <p:ajax event="itemSelect" update="comboCamas"
                                                    listener="#{registroSolucionMB.obtenerCamas}" />
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel for="comboCamas" style="margin-right: 1px;" value="Cama: " />
                                        <p:selectOneMenu id="comboCamas" title="Cama asignada a paciente"
                                                         value="#{registroSolucionMB.surtimientoExtendedSelected.idCama}"
                                                         autoWidth="true" filter="true" filterMatchMode="contains"
                                                         style="vertical-align: middle;"
                                                         disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <f:selectItem itemLabel="Seleccione Cama" itemValue="#{null}"/>
                                            <f:selectItems value="#{registroSolucionMB.listaCamas}"
                                                           var="cama" itemValue="#{cama.idCama}"
                                                           itemLabel="#{cama.nombreCama} - #{cama.ubicacion} " />
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel for="autoCompleteMedico" style="margin-right: 1px;">Médico Solicitante:</p:outputLabel>
                                        <p:autoComplete id="autoCompleteMedico" 
                                                value="#{registroSolucionMB.medico}" 
                                                required="true" requiredMessage="Debe seleccionar el Médico"
                                                completeMethod="#{registroSolucionMB.autoCompleteMedicos}" 
                                                minQueryLength="3" forceSelection="true"
                                                var="medico" itemValue="#{medico.idUsuario}" 
                                                itemLabel="#{medico.nombre} #{medico.apellidoPaterno} #{medico.apellidoMaterno}"
                                                converter="medicoConverter" 
                                                placeholder="Buscar Médico..."
                                                emptyMessage="Búsqueda sin resultados" 
                                                size="25" title="Médico Solicitante"
                                                scrollHeight="200"
                                                disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="Cédula Profesional" />
                                                </f:facet>
                                                <h:outputText value="#{medico.cedProfesional}" style=" font-size: small;" />
                                            </p:column>
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="Nombre" />
                                                </f:facet>
                                                <h:outputText value="#{medico.nombre}" style=" font-size: small; font-weight: bolder;" />
                                            </p:column>
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="Apellido Paterno" />
                                                </f:facet>
                                                <h:outputText value="#{medico.apellidoPaterno}" style=" font-size: small; font-weight: bolder;" />
                                            </p:column>
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="Apellido Materno" />
                                                </f:facet>
                                                <h:outputText value="#{medico.apellidoMaterno}" style=" font-size: small; font-weight: bolder;" />
                                            </p:column>
                                        </p:autoComplete>
                                        <p:commandButton id="agregaMedico" title="Agregar" value="+" 
                                            actionListener="#{registroSolucionMB.mostrarModalAgregarMedico}"
                                            onclick="PF('statusProcess').show();"
                                            oncomplete="PF('statusProcess').hide();PF('modalAgregarMedico').show();"
                                            update=":formAgregarMedico:turnoMedico"
                                            disabled="#{!registroSolucionMB.permiso.puedeAutorizar}">
                                            <p:resetInput target="formAgregarMedico"/>
                                        </p:commandButton>
                                    </div>
                                </div>
                                
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel for="autoCompletePaciente" style="margin-right: 1px;">Paciente:</p:outputLabel>
                                        <p:autoComplete id="autoCompletePaciente" 
                                                value="#{registroSolucionMB.pacienteExtended}" 
                                                completeMethod="#{registroSolucionMB.autoCompletePacientes}" 
                                                required="true" requiredMessage="Debe seleccionar el Paciente"
                                                minQueryLength="3" forceSelection="true"
                                                var="paciente" itemValue="#{paciente}"
                                                itemLabel="#{paciente.nombreCompleto} #{paciente.apellidoPaterno} #{paciente.apellidoMaterno}"
                                                converter="pacienteConverter" 
                                                placeholder="Buscar Paciente..."
                                                emptyMessage="Búsqueda sin resultados" 
                                                title="Nombre del Paciente"
                                                size="25" scrollHeight="200"
                                                disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:ajax event="itemSelect" listener="#{registroSolucionMB.selectPaciente}" 
                                                    update="txtNumPaciente, txtDiagnosticos, txtEdadPaciente, txtPesoPaciente, txtTallaPaciente, txtAreaPaciente, chkDiabetes, chkHipertension, chkProRenales, chkPadeCronico">
                                            </p:ajax>
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="No. de Expediente" />
                                                </f:facet>
                                                <h:outputText value="#{paciente.pacienteNumero}" style=" font-size: small;" />
                                            </p:column>
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="Clave DerechoHabiencia" />
                                                </f:facet>
                                                <h:outputText value="#{paciente.claveDerechohabiencia}" style=" font-size: small;" />
                                            </p:column>
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="Nombre" />
                                                </f:facet>
                                                <h:outputText value="#{paciente.nombreCompleto}" style=" font-size: small; font-weight: bolder;" />
                                            </p:column>
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="Apellido Paterno" />
                                                </f:facet>
                                                <h:outputText value="#{paciente.apellidoPaterno}" style=" font-size: small; font-weight: bolder;" />
                                            </p:column>
                                            <p:column style="font-size: small;">
                                                <f:facet name="header" >
                                                    <h:outputText value="Apellido Materno" />
                                                </f:facet>
                                                <h:outputText value="#{paciente.apellidoMaterno}" style=" font-size: small; font-weight: bolder;" />
                                            </p:column>
                                        </p:autoComplete>
                                        <p:commandButton id="agregaPaciente" title="Agregar" value="+" 
                                            onclick="PF('statusProcess').show();" immediate="true"
                                            actionListener="#{registroSolucionMB.mostrarModalAgregarPaciente}"
                                            oncomplete="PF('statusProcess').hide();PF('modalAgregarPaciente').show();"
                                            update="formAgregarPaciente"
                                            disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:resetInput target="formAgregarPaciente"/>
                                        </p:commandButton>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel style="margin-right: 1px;" value="Número Paciente: " />
                                        <p:outputLabel id="txtNumPaciente" class="textoNegrita" value="#{registroSolucionMB.pacienteExtended.pacienteNumero}" />
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:outputLabel for="tipoConsulta" style="margin-right: 1px;" value="Tipo Consulta: "/>
                                        <p:selectOneMenu id="tipoConsulta" title="Tipo de la Consulta" style="vertical-align: middle;" 
                                                         value="#{registroSolucionMB.surtimientoExtendedSelected.tipoConsulta}" 
                                                         autoWidth="true" required="true" requiredMessage="Seleccione tipo de consulta"
                                                         disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <f:selectItem itemLabel="Seleccione Tipo" itemValue="#{null}"/>
                                            <f:selectItem value="#{I}" itemLabel="Hospitalización" itemValue="I" />
                                            <f:selectItem value="#{E}" itemLabel="Ambulatoria" itemValue="E" />
                                        </p:selectOneMenu>
                                    </div>
                                </div>
                                
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel style="margin-right: 1px;" value="Fecha Nacimiento: " />
                                        <p:outputLabel id="txtFecNacPaciente" class="textoNegrita" 
                                                       value="#{registroSolucionMB.pacienteExtended.fechaNacimiento}" >
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </p:outputLabel>
                                        <p:outputLabel value=" (" />
                                        <p:outputLabel id="txtEdadPaciente" value="#{registroSolucionMB.pacienteExtended.edadPaciente}" />
                                        <p:outputLabel value=" años)" />
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel style="margin-right: 1px;" value="Peso: "  />
                                        <p:inputText id="txtPesoPaciente"  size="1" maxlength="4"
                                                     value="#{registroSolucionMB.surtimientoExtendedSelected.pesoPaciente}"
                                                     disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:keyFilter regEx="/[\d\.]/i" />
                                            <p:ajax event="change" update="txtAreaPaciente" listener="#{registroSolucionMB.obtenerSuperficieCorporal()}" />
                                        </p:inputText> kg
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel style="margin-right: 1px;" value="Estatura: "  />
                                        <p:inputText id="txtTallaPaciente" size="1" maxlength="4"
                                                     value="#{registroSolucionMB.surtimientoExtendedSelected.tallaPaciente}"
                                                     disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:keyFilter regEx="/[\d\.]/i" />
                                            <p:ajax event="change" update="txtAreaPaciente" listener="#{registroSolucionMB.obtenerSuperficieCorporal()}" />
                                        </p:inputText> mts
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel style="margin-right: 1px;" value="#{msg['cenmez.areaCorp']}: "  />
                                        <p:inputText id="txtAreaPaciente"  size="1" maxlength="4"
                                                     value="#{registroSolucionMB.surtimientoExtendedSelected.areaCorporal}" 
                                                     disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:keyFilter regEx="/[\d\.]/i" />
                                        </p:inputText> m²
                                    </div>
                                </div>

                                <div class="ui-g-12" >
                                    <div style="width:60%; float:left;">
                                        <p:outputLabel value="Diagnósticos: * " style="margin-right: 1px; vertical-align: top; "/>
                                        <p:autoComplete id="txtDiagnosticos"
                                                styleClass="autocomplete-multiple-hiper"
                                                multiple="true"  requiredMessage="Se requiere al menos un Diagnóstico"
                                                placeholder="Agregar Diagnósticos" 
                                                value="#{registroSolucionMB.listaDiagnosticos}"
                                                completeMethod="#{registroSolucionMB.autocompleteDiagnosticos}"
                                                minQueryLength="4"
                                                forceSelection="true"
                                                var="diagnos"
                                                itemLabel="#{diagnos.nombre}" itemValue="#{diagnos}" 
                                                converter="musGenericConverter"
                                                disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:ajax event="itemSelect" update="txtDiagnosticos"></p:ajax>
                                            <p:column style="width: 20px; font-size: small;" width="50px">
                                                <f:facet name="header" >
                                                    <h:outputText value="Clave" />
                                                </f:facet>
                                                <h:outputText value="#{diagnos.clave}" style=" font-size: small;" />
                                            </p:column>
                                            <p:column style="width: 600px; font-size: small;" width="600px">
                                                <f:facet name="header" >
                                                    <h:outputText value="Descripción" />
                                                </f:facet>
                                                <h:outputText value="#{diagnos.nombre}" style=" font-size: x-small;" />
                                            </p:column>
                                        </p:autoComplete>
                                    </div>
                                    
                                    <div style="width:10%; float:left;">
                                        <p:outputLabel style="margin-right: 1px;" value="Prob Glucosa: " />
                                        <p:selectBooleanCheckbox value="#{registroSolucionMB.surtimientoExtendedSelected.diabetes}" 
                                                                 id="chkDiabetes"
                                                                 disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" />
                                    </div>
                                    <div style="width:10%; float:left;">
                                        <p:outputLabel style="margin-right: 1px;" value="Prob Renales: " />
                                        <p:selectBooleanCheckbox value="#{registroSolucionMB.surtimientoExtendedSelected.problemasRenales}" 
                                                                 id="chkProRenales"
                                                                 disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" />
                                    </div>
                                    <div style="width:10%; float:left;">
                                        <p:outputLabel style="margin-right: 1px;" value="Prob Hipertensión: " />
                                        <p:selectBooleanCheckbox value="#{registroSolucionMB.surtimientoExtendedSelected.hipertension}" 
                                                                 id="chkHipertension" 
                                                                 disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" />
                                    </div>
                                    <div style="width:5%; float:left;">
                                        <p:outputLabel style="margin-right: 1px;" value="Padec crónico: "  rendered="false" />
                                        <p:selectBooleanCheckbox value="#{registroSolucionMB.surtimientoExtendedSelected.padecimientoCronico}" 
                                                                 id="chkPadeCronico"  rendered="false" 
                                                                 disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" />
                                    </div>
                                    
                                </div>
                                
                                <p:outputLabel value="INFORMACIÓN DE LA SOLUCIÓN"  class="plabel" />
                                
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel for="tipoSolucion" style="margin-right: 1px;" value="Tipo Solución: "/>
                                        <p:selectOneMenu id="tipoSolucion" widgetVar="tipoSolucion" value="#{registroSolucionMB.idTipoSolucion}" label="Tipo de Solución"
                                                         title="Tipo de Solución" autoWidth="true" style="vertical-align: middle;" 
                                                         required="true" requiredMessage="Debe seleccionar el Tipo de Solución"
                                                         disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <f:selectItem itemLabel="Seleccione Tipo" itemValue="#{null}"/>
                                            <f:selectItems value="#{registroSolucionMB.tipoSolucionList}" var="tipoSol"
                                                           itemLabel="#{tipoSol.clave}" itemValue="#{tipoSol.idTipoSolucion}"/>
                                            <p:ajax event="itemSelect" update="protocolo txtDiagnostico"
                                                listener="#{registroSolucionMB.validaDiagnosticoProtocolo}">
                                            </p:ajax>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel for="viaAdministracion" style="margin-right: 1px;" value="Vía Administración: "/>
                                        <p:selectOneMenu id="viaAdministracion" value="#{registroSolucionMB.viaAdministracion.idViaAdministracion}"
                                                         label="Vía de administración" title="Vía de administración" autoWidth="true" style="vertical-align: middle; " 
                                                         required="true" requiredMessage="Seleccione vía de administración" filter="true" filterMatchMode="contains"
                                                         disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <f:selectItem itemLabel="Seleccione una opción" itemValue="#{null}"/>
                                            <f:selectItems value="#{registroSolucionMB.viaAdministracionList}" var="via"
                                                           itemLabel="#{via.nombreViaAdministracion}" itemValue="#{via.idViaAdministracion}"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                            <p:outputLabel style="margin-right: 1px;" value="Volumen total: " 
                                                           rendered="#{registroSolucionMB.validaPrescripcion}" />
                                            <p:inputText size="4"  style="margin-bottom: 5px;" 
                                                         value="#{registroSolucionMB.surtimientoExtendedSelected.volumenTotal}" 
                                                         rendered="#{registroSolucionMB.validaPrescripcion}"
                                                         disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" />
                                            <p:outputLabel value="ml"  rendered="#{registroSolucionMB.validaPrescripcion}" />
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel style="margin-right: 1px;" value="Contenedor: " 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}" />
                                        <p:selectOneMenu value="#{registroSolucionMB.surtimientoExtendedSelected.idContenedor}"  
                                                         rendered="#{registroSolucionMB.validaPrescripcion}"
                                                         filter="true" filterMatchMode="contains" placeholder="Seleccione un contenedor"
                                                      disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                                <f:selectItem itemLabel="Seleccione una opción" itemValue="#{null}"/>
                                                <f:selectItems value="#{registroSolucionMB.envaseList}" var="tipo" 
                                                               itemLabel="#{tipo.descripcion}" itemValue="#{tipo.idEnvaseContenedor}" />
                                                <p:ajax event="change" listener="#{registroSolucionMB.validarNuevaOrden}" 
                                                    onstart="PF('statusProcess').show();" oncomplete="PF('statusProcess').hide();"
                                                    update="txtCondicionesConser "/>
                                        </p:selectOneMenu>
                                    </div>
                                </div>
                                
                                <div class="ui-g-12" >
                                    <ui:remove>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel style="margin-right: 1px;" value="Fecha de Entrega: " for="txtFechaEntrega" /> 
                                        <p:calendar id="txtFechaEntrega" title="Fecha Programada" size="8"
                                                    value="#{registroSolucionMB.surtimientoExtendedSelected.fechaParaEntregar}"
                                                    showOn="button" locale="es_MX" navigator="true" pattern="dd/MM/yyyy"
                                                    pages="1" mask="true" showButtonPanel="true" effect="fade" 
                                                    disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" />
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel value="Hora de Entrega: " for="txtHoraEntrega" /> 
                                        <p:selectOneMenu id="txtHoraEntrega" style="vertical-align: middle;" 
                                                         value="#{registroSolucionMB.surtimientoExtendedSelected.idHorarioParaEntregar}" 
                                                         label="Hora de Entrega" filter="true" filterMatchMode="contains" 
                                                         title="Hora de Entrega" autoWidth="true"
                                                         disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <f:selectItem itemLabel="Seleccione horario" itemValue="#{null}"/>
                                            <f:selectItems value="#{registroSolucionMB.horarioEntregaLista}" var="horar" 
                                                           itemValue="#{horar.idHorarioEntrega}" itemLabel="#{horar.nombre}" />
                                        </p:selectOneMenu>
                                    </div>
                                    </ui:remove>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel for="chkPerfucionContinua" style="margin-right: 1px;" value="Perfusión Continua: "/>
                                        <p:selectBooleanCheckbox id="chkPerfucionContinua" 
                                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.perfusionContinua}"
                                                                 disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:ajax event="change" update="velocidad" listener="#{registroSolucionMB.activaPerfusion}" />
                                        </p:selectBooleanCheckbox>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel style="margin-right: 5px;" value="Tiempo Infusión: "/>
                                        <!-- p:inputNumber id="txtHorasInfusion" maxlength="2" maxValue="99" minValue="0" size="4"
                                                       value="# {registroSolucionMB.surtimientoExtendedSelected.horasInfusion}" 
                                                       disabled="# {!registroSolucionMB.editarHoraInfusion}">
                                            <p:ajax event="blur" update="txtVelocidad" 
                                                listener="# {registroSolucionMB.calculaVelocidadPerfusion}" />
                                        </p:inputNumber -->                                        
                                        <p:calendar id="dateHorasInfusion" value="#{registroSolucionMB.surtimientoExtendedSelected.horasInfusion}" pattern="HH:mm" timeOnly="true"
                                                    maxHour="72" maxMinute="59" 
                                                    disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}"
                                                    size="4"> 
                                                    <p:ajax event="blur" process="@this" update="velocidad" 
                                                listener="#{registroSolucionMB.calculaVelocidadPerfusion}" />
                                        </p:calendar>
                                        <p:outputLabel value=" hrs" />
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel for="velocidad" style="margin-right: 1px;" value="Velocidad: "/>
                                        <p:inputNumber id="velocidad" value="#{registroSolucionMB.surtimientoExtendedSelected.velocidad}" minValue="0" decimalSeparator="." thousandSeparator="," decimalPlaces="2" size="10" 
                                                       title="Velocidad de Administración" required="false" requiredMessage="Ingrese la Velocidad"
                                                       disabled="#{registroSolucionMB.existePrescripcion or (!registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}"  />
                                        <p:outputLabel value=" ml/h" />
                                    </div>
                                    <ui:remove>
                                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                                            <p:outputLabel for="ritmo" style="margin-right: 1px;">Ritmo:</p:outputLabel>
                                            <p:inputNumber id="ritmo" value="#{registroSolucionMB.surtimientoExtendedSelected.ritmo}" minValue="0" decimalSeparator="." thousandSeparator="," decimalPlaces="2" size="10" 
                                                           title="Ritmo de Administración" required="false" requiredMessage="Debe ingresar el Ritmo"
                                                           disabled="#{!registroSolucionMB.surtimientoExtendedSelected.perfusionContinua}"
                                                           />
                                            <p:outputLabel value=" cm³/min" />
                                        </div>
                                    </ui:remove>
<!--                                </div>
                                <div class="ui-g-12" >-->
                            </div>
                            
                            <div class="ui-g-12">
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel for="protocolo" style="margin-right: 1px;">Protocolo:</p:outputLabel>
                                        <p:selectOneMenu id="protocolo" value="#{registroSolucionMB.claveProtocolo}" 
                                                         label="Protocolo" filter="true" filterMatchMode="contains"
                                                         title="Tipo de Protocolo" autoWidth="true" style="vertical-align: middle;" 
                                                         disabled="#{!registroSolucionMB.isOncologica or (registroSolucionMB.isOncologica and registroSolucionMB.existePrescripcion) or (registroSolucionMB.isOncologica and !registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <f:selectItem itemLabel="Seleccione Protocolo" itemValue="#{null}"/>
                                            <f:selectItems value="#{registroSolucionMB.listaProtocolos}" var="proto" 
                                                           itemValue="#{proto.claveProtocolo}" itemLabel="#{proto.claveProtocolo}"/>
                                            <p:ajax event="itemSelect" update="formWarning:msjWarning txtDiagnostico"
                                                listener="#{registroSolucionMB.obtenerProtocoloSeleccionado}">
                                            </p:ajax>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel for="txtDiagnostico" style="margin-right: 1px;">Diagnóstico:</p:outputLabel>
                                        <p:autoComplete id="txtDiagnostico"
                                                styleClass="autocomplete-multiple-hiper"
                                                multiple="false"
                                                placeholder="Buscar Diagnóstico" 
                                                value="#{registroSolucionMB.diagnosticoSelected}"
                                                completeMethod="#{registroSolucionMB.autocompleteDiagnostico}"
                                                minQueryLength="4"                                                       
                                                forceSelection="true"                                                         
                                                var="diagnos" size ="20"
                                                itemLabel="#{diagnos.nombre}" itemValue="#{diagnos}" 
                                                converter="musGenericConverter" 
                                                disabled="#{!registroSolucionMB.isOncologica or (registroSolucionMB.isOncologica and registroSolucionMB.existePrescripcion) or (registroSolucionMB.isOncologica and !registroSolucionMB.existePrescripcion and !registroSolucionMB.permiso.puedeAutorizar)}" >
                                            <p:column style="width: 20px; font-size: small;" width="50px">
                                                <f:facet name="header" >
                                                    <h:outputText value="Clave" />
                                                </f:facet>
                                                <h:outputText value="#{diagnos.clave}" style=" font-size: small;" />
                                            </p:column>
                                            <p:column style="width: 600px; font-size: small;" width="600px">
                                                <f:facet name="header" >
                                                    <h:outputText value="Descripción" />
                                                </f:facet>
                                                <h:outputText value="#{diagnos.nombre}" style=" font-size: x-small;" />
                                            </p:column>
                                            <p:ajax event="itemSelect" update="formWarning:msjWarning"
                                                listener="#{registroSolucionMB.validaDiagnosticoProtocolo}">
                                            </p:ajax>
                                        </p:autoComplete>
                                    </div>
                                </div>

                                <div class="ui-g-12" style="padding: 10px 5px; background-color: #bfbfbf; margin-right:20px;">
                                    <div style="width: 5%; float:left;">
                                        <p:inputText id="xcantidad"
                                                     value="#{registroSolucionMB.xcantidad}"
                                                     size="3" rendered="false"
                                                     title="Cantidad de medicamentos">
                                            <p:keyFilter regEx="/[0-9]{1,4}/i" />
                                            <p:ajax event="keyup" update="@this" />
                                        </p:inputText>
                                    </div>
                                    <div style="width: 40%; float:left;">
                                        <p:autoComplete id="txtInsumo" 
                                                        value="#{registroSolucionMB.medicamento}" 
                                                        completeMethod="#{registroSolucionMB.autoCompleteMedicamentos}"
                                                        minQueryLength="3" 
                                                        forceSelection="true"
                                                        var="insumo" 
                                                        itemLabel="#{insumo.nombreCorto}" 
                                                        itemValue="#{insumo}" 
                                                        converter="medicamentoExtHashConverter"
                                                        placeholder="Buscar Insumo"
                                                        scrollHeight="250"
                                                        emptyMessage="No se encontro registro."
                                                        readonly="#{not registroSolucionMB.editable}" 
                                                        size="65">
                                            <p:ajax event="itemSelect" process="txtInsumo, lblUnidad" update="txtInsumo, lblUnidad"></p:ajax>
                                            <p:column style="width: 20px; font-size: small;" width="20px">
                                                <f:facet name="header" >
                                                    <h:outputText value="Clave Institucional" />
                                                </f:facet>
                                                <h:outputText value="#{insumo.claveInstitucional}" style=" font-size: small;" />
                                            </p:column>
                                            <p:column style="width: 350px; font-size: small;" width="350px">
                                                <f:facet name="header" >
                                                    <h:outputText value="Descripción" />
                                                </f:facet>
                                                <h:outputText value="#{insumo.nombreCorto}" style=" font-size: x-small;" />
                                            </p:column>
                                            <p:column style="width: 180px; font-size: small;" width="350px">
                                            <f:facet name="header" >
                                                <h:outputText value="Almacén" />
                                            </f:facet>
                                            <h:outputText value="#{insumo.nombreEstructura}" style=" font-size: x-small;" />
                                        </p:column>
                                        <p:column style="width: 120px; font-size: small;" width="350px">
                                            <f:facet name="header" >
                                                <h:outputText value="Cant. Disponible" />
                                            </f:facet>
                                            <h:outputText value="#{insumo.cantidadDisponible}" style=" font-size: x-small;" />
                                        </p:column>
                                        </p:autoComplete>
                                    </div>
                                    <div style="width: 15%; float:left;">
                                        <p:outputLabel for="dosis" style="margin-right: 1px;" value="Cant/Dosis: "/>
                                        <p:inputNumber id="dosis" style="margin-right: 1px;" value="#{registroSolucionMB.dosis}"
                                                       minValue="0" decimalSeparator="." thousandSeparator="," decimalPlaces="2" size="6" title="Dosis"
                                                       readonly="#{not registroSolucionMB.editable}" />
                                        <p:outputLabel id="lblUnidad" value="#{registroSolucionMB.medicamento.nombreUnidadConcentracion}"/>
                                    </div>
                                    <div style="width: 20%; float:left;">
                                        <p:outputLabel for="frecuencia" style="margin-right: 1px;" value="Frecuencia: "/>
                                        <p:selectOneMenu id="frecuencia" value="#{registroSolucionMB.frecuencia}" label="Frecuencia" filter="true" filterMatchMode="contains"
                                                         title="Frecuencia" autoWidth="true" style="vertical-align: middle;"
                                                         disabled="#{not registroSolucionMB.editable}" >
                                            <f:selectItem itemLabel="Seleccione una opción" itemValue="#{null}"/>
                                            <f:selectItems value="#{registroSolucionMB.listaFrecuencias}" var="frec" itemValue="#{frec.frecuencia}" itemLabel="#{frec.nombre} - #{frec.frecuencia} hr(s)"></f:selectItems>
                                        </p:selectOneMenu>
                                    </div>
                                    <div style="width: 13%; float:left;">
                                        <p:outputLabel for="duracion" style="margin-right: 1px;" value="Duración: "/>
                                        <p:inputNumber id="duracion" value="#{registroSolucionMB.duracion}" 
                                                       minValue="0" maxValue="90" decimalPlaces="0" size="4" title="Duración"
                                                       readonly="#{not registroSolucionMB.editable}" />
                                    </div>
                                    <div style="width: 7%; float: right;">
                                        <p:commandButton value="Agregar"
                                                         style="float: right;"
                                                         actionListener="#{registroSolucionMB.agregarMedicamento}"
                                                         update="msgValidaEdicion, txtInsumo, dosis, frecuencia, duracion, tblInsumos"
                                                         rendered="#{registroSolucionMB.surtimientoExtendedSelected.idEstatusSurtimiento eq 1 or registroSolucionMB.surtimientoExtendedSelected.idEstatusSurtimiento eq 10}"
                                                         disabled="#{not registroSolucionMB.editable}" 
                                                         styleClass="btnMusAzul" />
                                    </div>
                                </div>

                                <p:dataTable id="tblInsumos"
                                             widgetVar="tblInsumos" 
                                             value="#{registroSolucionMB.surtimientoInsumoExtendedList}"                                   
                                             var="item"
                                             rowIndexVar="row"
                                             style="margin-top:0px; margin-bottom:5px; width:98%;"
                                             styleClass="mystyle"
                                             scrollable="true" scrollHeight="120"
                                             emptyMessage="No hay insumos capturados"
                                             reflow="true"
                                             paginator="false"
                                             rows="0"
                                             disabledSelection="true">
                                    <p:column style="text-align: left; width: 10% "
                                              sortBy="#{item.claveInstitucional}" >
                                        <f:facet name="header" >
                                            <h:outputText value="Clave" />
                                        </f:facet>
                                        <h:outputText value="#{item.claveInstitucional}" class="textoNegrita" />
                                    </p:column>
                                    <p:column  style="text-align: left; width: 60% "
                                              sortBy="#{item.nombreCorto}" >
                                        <f:facet name="header" >
                                            <h:outputText value="Insumo" />
                                        </f:facet>
                                        <h:outputText value="#{item.nombreCorto}" />
                                    </p:column>
                                    <p:column  style="text-align: left; width: 10% ">
                                        <f:facet name="header" >
                                            <h:outputText value="Dosis" />
                                        </f:facet>
                                        <h:outputText value="#{item.dosis} #{item.unidadConcentracion}" />
                                    </p:column>
                                    <p:column style="text-align: left; width: 6% " >
                                        <f:facet name="header" >
                                            <h:outputText value="Frecuencia" />
                                        </f:facet>
                                        <h:outputText value="#{item.frecuencia}" />
                                    </p:column>
                                    <p:column style="text-align: left; width: 5% " >
                                        <f:facet name="header" >
                                            <h:outputText value="Duración" />
                                        </f:facet>
                                        <h:outputText value="#{item.duracion}" />
                                    </p:column>
                                    <p:column style="text-align: left; width: 5% " >
                                        <f:facet name="header" >
                                            <h:outputText value="Cant Req" />
                                        </f:facet>
                                        <h:outputText value="#{item.cantidadSolicitada}" class="textoNegrita" />
                                    </p:column>
                                    <p:column  style="text-align: left; width: 4% " >
                                        <f:facet name="header">
                                            <h:outputText value="Eliminar" />
                                        </f:facet>
                                        <p:commandLink title="Eliminar" onclick="PF('statusProcess').show()"
                                                oncomplete="PF('statusProcess').hide();"
                                                actionListener="#{registroSolucionMB.eliminaInsumoDeLista(item)}"
                                                update="formEditarOrden:tblInsumos"
                                                rendered="#{(registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 2 
                                                              or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 3
                                                              or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 6
                                                              or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 7)}"
                                                disabled="#{!registroSolucionMB.permiso.puedeEliminar}" >
                                            <i class="fa fa-trash iconMusRojo" />
                                        </p:commandLink>
                                    </p:column>
                                </p:dataTable>
                                
                                <br/>
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-12">
                                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel value="Motivo Rechazo: " 
                                                       rendered="#{registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 4 or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 6}" />
                                        <p:outputLabel value="#{registroSolucionMB.surtimientoExtendedSelected.comentariosRechazo}" 
                                                       style="margin-right: 1px; font-weight: bold;"
                                                       rendered="#{registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 4 or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 6}" />
                                        </div>
                                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel value="Horario de Rechazo: " 
                                                       rendered="#{registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 4 or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 6}" />
                                        <p:outputLabel value="#{registroSolucionMB.surtimientoExtendedSelected.fechaRechazo}" 
                                                       style="margin-right: 1px; font-weight: bold;"
                                                       rendered="#{registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 4 or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 6}" >
                                            <f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
                                        </p:outputLabel>
                                        </div>
                                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                                        <p:outputLabel value="Usuario Rechaza: " 
                                                       rendered="#{registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 4 or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 6}" />
                                        <p:outputLabel value="#{registroSolucionMB.surtimientoExtendedSelected.usuarioRechazo}" 
                                                       style="margin-right: 1px; font-weight: bold;"
                                                       rendered="#{registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 4 or registroSolucionMB.surtimientoExtendedSelected.idEstatusSolucion eq 6}" />
                                        </div>
                                    </div>
                                </div>
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-6" >
                                        <p:outputLabel style="margin-right: 1px; font-weight: bold;" 
                                                       value="Observaciones: " 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}" />
                                        <br/>
                                        <p:inputTextarea id="txtCondicionesConser" rows="4" cols="80"
                                                         value="#{registroSolucionMB.surtimientoExtendedSelected.observaciones}" 
                                                         rendered="#{registroSolucionMB.validaPrescripcion}"
                                                         readonly="#{not registroSolucionMB.editable}"/>
                                    </div>
                                    <ui:remove>
                                    <div class="ui-g-12 ui-md-6 ui-lg-6" >
                                        <p:outputLabel style="margin-right: 1px; font-weight: bold;" 
                                                       value="Instrucciones de Preparación: " 
                                                       rendered="#{registroSolucionMB.validaPrescripcion}" />
                                        <br/>
                                        <p:inputTextarea id="txtInstruccionesPrep" rows="4" cols="80" 
                                                         value="#{registroSolucionMB.surtimientoExtendedSelected.instruccionPreparacion}" 
                                                         rendered="#{registroSolucionMB.validaPrescripcion}"
                                                         readonly="#{not registroSolucionMB.editable}"/>
                                    </div>
                                    </ui:remove>
                                </div>
                                
                                <ui:remove>
                                <div class="ui-g-12" >
                                    <div class="ui-g-12 ui-md-6 ui-lg-9">
                                        <p:selectBooleanCheckbox id="chkTemRefrigeracion" itemLabel="Temp. Refrigeración" 
                                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.tempRefrigeracion}" 
                                                                 rendered="#{registroSolucionMB.validaPrescripcion}"
                                                                 disabled="#{not registroSolucionMB.editable}"/>
                                        <p:selectBooleanCheckbox id="chkTemAmbiente" itemLabel="Temp. Ambiente" 
                                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.tempAmbiente}" 
                                                                 rendered="#{registroSolucionMB.validaPrescripcion}"
                                                                 disabled="#{not registroSolucionMB.editable}"/>
                                        <p:selectBooleanCheckbox id="chkProteccionLuz" itemLabel="Protección de Luz" 
                                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.proteccionLuz}" 
                                                                 rendered="#{registroSolucionMB.validaPrescripcion}"
                                                                 disabled="#{not registroSolucionMB.editable}"/>
                                        <p:selectBooleanCheckbox id="chkNoAgitar" itemLabel="No agitar" 
                                                                 value="#{registroSolucionMB.surtimientoExtendedSelected.noAgitar}" 
                                                                 rendered="#{registroSolucionMB.validaPrescripcion}"
                                                                 disabled="#{not registroSolucionMB.editable}"/>
                                    </div>
                                </div>
                                </ui:remove>
                                
                                <div class="ui-g-12" style=" width: 100% !important; /*position: absolute; bottom: 0px;*/ background-color: #f8f8f8; border-top: solid 2px #C8C8C8;  " >
                                    <div class="ui-g-12 ui-md-6 ui-lg-4" style="display: flex; align-content: center; justify-content: space-between; float: right;" >
                                        <div >
                                            <p:commandButton value="Cerrar" icon="fa fa-times-circle"  onclick="PF('modalEditarOrden').hide();" /> 
                                        </div>
                                        <div >
                                            <p:commandButton value="Cancelar" styleClass="btnMusRed" icon="fa fa-times-circle" 
                                                         style="margin-right: 1px; float: right;"
                                                         onclick="PF('statusProcess').show();"
                                                         actionListener="#{registroSolucionMB.validaCancelacion}"
                                                         oncomplete="PF('statusProcess').hide(); if(args.estatus) { PF('dlgCofirmaCancelacion').show(); } else {PF('modalEditarOrden').content.scrollTop('0') }"
                                                         update=":frmCofirmaCancelacion, :formEditarOrden:msgValidaEdicion"
                                                         rendered="#{registroSolucionMB.cancelable}" />
                                        </div>
                                        <div >
                                            <p:commandButton value="Rechazar" styleClass="btnMusOrange" icon="fa fa-times-circle" 
                                                     onclick="PF('statusProcess').show()"
                                                     oncomplete="PF('statusProcess').hide(); if (args.estatus){PF('dlgCofirmaRechazo').show();}  else { PF('modalEditarOrden').content.scrollTop('0') } "
                                                     actionListener="#{registroSolucionMB.validaRechazo}" 
                                                     rendered="#{registroSolucionMB.rechazable}" 
                                                     style="margin-right: 10px;float: right;" 
                                                     update=":mainForm:tblSurtimientos , :mainForm:validaMsg , :frmCofirmaRechazo  " /> 
                                    
                                        </div>
                                        <div >
                                            <p:commandButton value="Validar"
                                                             icon="fa fa-check-circle" 
                                                             onclick="PF('statusProcess').show()"
                                                             oncomplete="PF('statusProcess').hide(); if (args.estatus) { PF('modalValidaEditarOrden').show(); } else {  PF('modalEditarOrden').content.scrollTop('0'); } "
                                                             actionListener="#{registroSolucionMB.validaModificarOrden}" 
                                                             styleClass="btnMusAzul" 
                                                             update=":mainForm:tblSurtimientos, :formEditarOrden:msgValidaEdicion , :frmValidaPrescripcion:msgValidaPrescripcion"
                                                             rendered="#{registroSolucionMB.editable}" /> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                    </p:confirmDialog>
                        </h:form>
                </p:dialog>
                
                <p:dialog header="CONFIRMACIÓN"
                          widgetVar="dlgCofirmaCancelacion"
                          closeOnEscape="true"
                          closable="true"
                          modal="true" 
                          resizable="false"
                          responsive="true"
                          style="font-size:xx-small !important; " >
                    <h:form id="frmCofirmaCancelacion" >
                        <p:messages id="msgCofirmaCancelacion" globalOnly="false" showDetail="false" closable="true" />
                        <div class="ui-g">
                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-6">
                                    <p:outputLabel value="Desea cancelar la mezcla ?" style="font-weight: bold;" />
                                </div>
                            </div>
                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-2">
                                    <p:outputLabel value="Motivo: " for="txtMotivo" rendered="false" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-9">
                                    <p:selectOneMenu id="txtMotivo" class="sOneMenu" value="#{registroSolucionMB.solucion.idMotivoCancelacion}"
                                                  filter="true" filterMatchMode="contains" filterPlaceholder="Seleccione motivo"
                                                  required="true" requiredMessage="Seleccione motivo" immediate="true"
                                                  rendered="false" >
                                        <f:selectItem itemValue="#{0}" itemLabel="Seleccione una opción"  />
                                        <f:selectItem itemValue="#{1}" itemLabel="Alta de paciente"/>
                                        <f:selectItem itemValue="#{2}" itemLabel="Cambio de Tratamiento"/>
                                        <f:selectItem itemValue="#{3}" itemLabel="Diagnóstico de alta"/>
                                        <f:selectItem itemValue="#{4}" itemLabel="Egreso de paciente"/>
                                        <f:selectItem itemValue="#{5}" itemLabel="Error en prescripción"/>
                                        <f:selectItem itemValue="#{6}" itemLabel="Sospecha de evento Adverso"/>
                                    </p:selectOneMenu>
                                </div>
                            </div>
                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-2">
                                    <p:outputLabel value="Comentarios: " for="txtComentariosCancela" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-9">
                                    <p:inputText id="txtComentariosCancela" maxlength="99" size="40" placeholder="" 
                                                 required="true" requiredMessage="Registre motivo de cancelación" 
                                                 value="#{registroSolucionMB.solucion.comentariosCancelacion}" />
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div class="ui-g-12" style=" width: 100% !important; /*position: absolute; bottom: 0px;*/ background-color: #f8f8f8; border-top: solid 2px #C8C8C8;  " >
                            <div class="ui-g-12 ui-md-6 ui-lg-4" style="display: flex; align-content: center; justify-content: space-between; float: right;" >
                                <div>
                                    <p:commandButton title="No" value="No" 
                                                     styleClass="btnMusBoolGris" style="margin-right: 1px; float: right;"
                                                     oncomplete="PF('dlgCofirmaCancelacion').hide();" />
                                </div>
                                <div >
                                    <p:commandButton id="btnConfirmCancela" value="Si" 
                                                     styleClass="btnMusRed" style="margin-right: 1px; float: right;"
                                                     onclick="PF('statusProcess').show();"
                                                     actionListener="#{registroSolucionMB.ejecutaCancelacion}" 
                                                     oncomplete="PF('statusProcess').hide(); if(args.estatus) { PF('dlgCofirmaCancelacion').hide(); PF('modalEditarOrden').hide(); } "
                                                     update=":mainForm, :formNuevaOrden, :frmCofirmaCancelacion" />
                                </div>
                            </div>
                        </div>
                    </h:form>
                </p:dialog>
                
                <p:dialog header="CONFIRMACIÓN DE RECHAZO"
                          widgetVar="dlgCofirmaRechazo"
                          closeOnEscape="true"
                          closable="true"
                          modal="true" 
                          resizable="false"
                          responsive="true"
                          style="font-size:xx-small !important; " >
                    <h:form id="frmCofirmaRechazo" >
                        <p:messages id="msgCofirmaRechazo" globalOnly="false" showDetail="false" closable="true" />
                        <div class="ui-g">
                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-6">
                                    <p:outputLabel value="Desea rechazar la Prescripción de la Mezcla ?" 
                                                   style="font-weight: bold;" />
                                </div>
                            </div>
                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:outputLabel value="Motivo: " for="txtMotivoRechazo"
                                                   rendered="false" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3">
                                    <p:selectOneMenu id="txtMotivoRechazo" class="sOneMenu" 
                                                     value="#{registroSolucionMB.solucion.idMotivoRechazo}"
                                                     filter="true" filterMatchMode="contains" filterPlaceholder="Seleccione motivo"
                                                     required="true" requiredMessage="Seleccione motivo" immediate="true"
                                                     rendered="false" >
                                        <f:selectItem itemValue="#{null}" itemLabel="Seleccione una opción"  />
                                        <f:selectItem itemValue="#{1}" itemLabel="Alta de paciente"/>
                                        <f:selectItem itemValue="#{2}" itemLabel="Cambio de Tratamiento"/>
                                        <f:selectItem itemValue="#{3}" itemLabel="Datos Incompletos"/>
                                        <f:selectItem itemValue="#{17}" itemLabel="Cantidades insuficientes" />
                                        <f:selectItem itemValue="#{14}" itemLabel="Condiciones de preparación incorrectas" />
                                        <f:selectItem itemValue="#{15}" itemLabel="Condiciones de conservación incorrectas" />
                                        <f:selectItem itemValue="#{4}" itemLabel="Diagnóstico de alta"/>
                                        <f:selectItem itemValue="#{5}" itemLabel="Egreso de paciente"/>
                                        <f:selectItem itemValue="#{6}" itemLabel="Error en preparación"/>
                                        <f:selectItem itemValue="#{7}" itemLabel="Error en prescripción"/>
                                        <f:selectItem itemValue="#{12}" itemLabel="Medicamento contaminado" />
                                        <f:selectItem itemValue="#{13}" itemLabel="Medicamento caduco" />
                                        <f:selectItem itemValue="#{8}" itemLabel="Mezcla inestable"/>
                                        <f:selectItem itemValue="#{10}" itemLabel="Reacción de hipersensibilidad"/>
                                        <f:selectItem itemValue="#{11}" itemLabel="Sospecha de RAM"/>
                                        <f:selectItem itemValue="#{9}" itemLabel="Sospecha de evento Adverso"/>
                                    </p:selectOneMenu>
                                </div>
                            </div>
                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-2">
                                    <p:outputLabel value="Comentarios " for="txtComentariosRechazo" />
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-6">
                                    <p:inputText id="txtComentariosRechazo" maxlength="180" size="40" placeholder=""
                                                 required="true" requiredMessage="Registre motivo de cancelación" 
                                                 value="#{registroSolucionMB.solucion.comentariosRechazo}" />
                                </div>
                            </div>
                        </div>
                        <br/>
                        <br/>
                        <div class="ui-g-12" style=" width: 100% !important; /*position: absolute; bottom: 0px;*/ background-color: #f8f8f8; border-top: solid 2px #C8C8C8;  " >
                            <div class="ui-g-12 ui-md-6 ui-lg-3" style="display: flex; align-content: center; justify-content: space-between; float: right;" >
                                <div>
                                   <p:commandButton title="No" value="No" styleClass="btnMusBoolGris" 
                                         style="margin-right: 1px; float: right;"
                                         oncomplete="PF('dlgCofirmaRechazo').hide();" />
                                </div>
                                <div>
                                    <p:commandButton id="btnConfirmaRechazo" value="Si" styleClass="btnMusRed" 
                                         style="margin-right: 1px; float: right;"
                                         onclick="PF('statusProcess').show();"
                                         actionListener="#{registroSolucionMB.rechazarValidacionSolucion}" 
                                         oncomplete="PF('statusProcess').hide(); if(args.estatus) { PF('dlgCofirmaRechazo').hide(); PF('modalEditarOrden').hide(); } "
                                         update=":mainForm, :frmCofirmaRechazo" />
                                </div>
                            </div>
                        </div>
                    </h:form>
                </p:dialog>
                
                
                <p:dialog header="CONFIRMACIÓN DE VALIDACIÓN DE PRESCRIPCIÓN"
                          widgetVar="modalValidaEditarOrden"
                          closeOnEscape="true"
                          closable="true"
                          modal="true" 
                          resizable="false"
                          responsive="true"
                          style="font-size:xx-small !important; " >
                    <h:form id="frmValidaPrescripcion" >
                        <p:messages id="msgValidaPrescripcion" globalOnly="true" showDetail="false" closable="true" />
                        <div class="ui-g">
                            <div class="ui-g-12" >
                                <div class="ui-g-12 ui-md-6 ui-lg-12">
                                    <p:outputLabel value="Desea validar la Prescripción de la Mezcla ?" 
                                                   style="font-weight: bold;" />
                                </div>
                            </div>
                        </div>
                        <br/>
                        <br/>
                        <div class="ui-g-12" style=" width: 100% !important; /*position: absolute; bottom: 0px;*/ background-color: #f8f8f8; border-top: solid 2px #C8C8C8;  " >
                            <div class="ui-g-12 ui-md-6 ui-lg-3" style="display: flex; align-content: center; justify-content: space-between; float: right;" >
                                <div>
                                   <p:commandButton title="No" value="No" styleClass="btnMusBoolGris" 
                                         style="margin-right: 1px; float: right;"
                                         oncomplete="PF('modalValidaEditarOrden').hide();" />
                                </div>
                                <div>
                                    <p:commandButton id="btnConfirmaRechazo" value="Si" styleClass="btnMusAzul" 
                                         style="margin-right: 1px; float: right;"
                                         onclick="PF('statusProcess').show();"
                                         actionListener="#{registroSolucionMB.modificarOrden}" 
                                         oncomplete="PF('statusProcess').hide(); if(args.estatus) { PF('modalValidaEditarOrden').hide(); PF('modalEditarOrden').hide(); } "
                                         update=":mainForm, :frmValidaPrescripcion" />
                                </div>
                            </div>
                        </div>
                    </h:form>
                </p:dialog>
                
                
                <p:dialog header="AGREGAR PACIENTE"
                          widgetVar="modalAgregarPaciente"
                          closeOnEscape="true"
                          closable="true"
                          modal="true" 
                          resizable="false"
                          responsive="true"
                          width="500px" 
                          style="font-size:xx-small !important; " >
                    <h:form id="formAgregarPaciente" >
                        <p:messages id="msgModalAddUsuario" globalOnly="false" showDetail="false" closable="true" />
                        <p:panelGrid columns="2" >
                            <p:outputLabel value="Tipo de paciente : " rendered="false" />
                            <p:selectOneMenu id="tipoPaciente" style="width: 152px;" rendered="false" 
                                             value="#{registroSolucionMB.paciente.idTipoPaciente}" >
                                <f:selectItems value="#{registroSolucionMB.listaTipoPacientes}"
                                               var="tipoPaciente" itemValue="#{tipoPaciente.idCatalogoGeneral}"
                                               itemLabel="#{tipoPaciente.nombreCatalogo}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="Clave de Paciente : " for="txtPacClavePaciente" />
                            <p:inputText id="txtPacClavePaciente" value="#{registroSolucionMB.paciente.claveDerechohabiencia}"
                                         required="true" requiredMessage="Clave de paciente requerida" placeholder="Clave o número de paciente" />
                            <p:outputLabel value="Nombre : " for="txtPacNombrePaciente" />
                            <p:inputText id="txtPacNombrePaciente" value="#{registroSolucionMB.paciente.nombreCompleto}"
                                         required="true" requiredMessage="Nombre de paciente requerido" placeholder="Nombre(s) de paciente" />
                            <p:outputLabel value="Apellido Paterno : " for="txtPacApePatPaciente" />
                            <p:inputText id="txtPacApePatPaciente" value="#{registroSolucionMB.paciente.apellidoPaterno}" placeholder="Apellido paterno"
                                         required="true" requiredMessage="Apellido paterno requerido" />
                            <p:outputLabel value="Apellido Materno : " for="txtPacApeMatPaciente" />
                            <p:inputText id="txtPacApeMatPaciente" value="#{registroSolucionMB.paciente.apellidoMaterno}" placeholder="Apellido materno" />
                            <p:outputLabel value="Sexo : " for="txtPacSexoPaciente" />
                            <p:selectOneButton id="txtPacSexoPaciente" value="#{registroSolucionMB.paciente.sexo}">
                                <f:selectItem itemLabel="Masculino" itemValue="M" />
                                <f:selectItem itemLabel="Femenino" itemValue="F" />
                            </p:selectOneButton>
                            <p:outputLabel value="Fecha Nacimiento : " for="txtFechaInicio" />
                            <p:calendar id="txtFechaInicio" showOn="button" navigator="true" yearRange="c-100:c" pages="1" 
                                        value="#{registroSolucionMB.paciente.fechaNacimiento}" maxdate="#{registroSolucionMB.fechaActual}"
                                        mask="true" pattern="dd/MM/yyyy" locale="es_MX" placeholder="dd/MM/yyyy" 
                                        required="true" requiredMessage="Fecha de nacimiento requerida" />
                            <p:selectCheckboxMenu id="turno" label="Turnos" rendered="false"
                                                  value="#{registroSolucionMB.listaIdTurnos}" >
                                <f:selectItems value="#{registroSolucionMB.listaTurnos}" rendered="false"
                                               var="turno" itemValue="#{turno.idTurno.toString()}" itemLabel="#{turno.nombre}" />
                            </p:selectCheckboxMenu>
                            
                            <p:outputLabel value="CURP : " for="txtPacCurp" />
                            <p:inputText id="txtPacCurp" value="#{registroSolucionMB.paciente.curp}" 
                                         placeholder="CURP" maxlength="18" />
                            
                            <p:outputLabel value="RFC : " for="txtPacRfc" />
                            <p:inputText id="txtPacRfc" value="#{registroSolucionMB.paciente.rfc}" 
                                         placeholder="RFC" maxlength="13" />
                            
                            <p:outputLabel value="Lugar Nacimiento : " for="txtPacLugarNac" />
                            <p:inputText id="txtPacLugarNac" value="#{registroSolucionMB.paciente.lugarNacimiento}" 
                                         placeholder="Lugar de Nacimiento" maxlength="45" />
                            
                            <p:outputLabel value="País de Residencia : " for="txtPacPaisRes" />
                            <p:inputText id="txtPacPaisRes" value="#{registroSolucionMB.paciente.paisResidencia}" 
                                         placeholder="Pais de Residencia" maxlength="45" />
                            
                          <p:outputLabel value="Presenta Discapacidad : " for="txtPacPresDisc" />
                          <p:inputText id="txtPacPresDisc" value="#{registroSolucionMB.paciente.descripcionDiscapacidad}" 
                                       placeholder="Descripción Discapacidad" maxlength="45" />
                            
                        </p:panelGrid>
                        <br/>
                        <p:commandButton value="Agregar" title="Guardar paciente" styleClass="btnMusAzul" style="float: right;"
                                         onclick="PF('statusProcess').show();"
                                         actionListener="#{registroSolucionMB.agregarPaciente}"
                                         oncomplete="PF('statusProcess').hide();if(!args.error){PF('modalAgregarPaciente').hide()};"
                                         update=":formNuevaOrden:msgValidaRegistro msgModalAddUsuario" >
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                            </p:confirmDialog>
                        </p:commandButton>
                        <p:commandButton title="Cancelar" value="Cancelar" oncomplete="PF('modalAgregarPaciente').hide();"  style="float: right;"/>
                    </h:form>
                </p:dialog>

                
                <p:dialog header="AGREGAR MÉDICO"
                          widgetVar="modalAgregarMedico"
                          closeOnEscape="true"
                          closable="true"
                          modal="true" 
                          resizable="false"
                          responsive="true"
                          style="font-size:xx-small !important; " >
                    <h:form id="formAgregarMedico" >
                        <p:messages id="msgModalAddMedico" globalOnly="false" showDetail="false" closable="true" />
                        <p:panelGrid columns="2" >
                            <p:outputLabel value="Nombre" for="txtNombre" />
                            <p:inputText id="txtNombre" placeholder="Nombre" maxlength="30"
                                         required="true"  requiredMessage="Nombre de Médico requerido" 
                                         value="#{registroSolucionMB.medicoExtended.nombre}"  />
                            <p:outputLabel value="Apellido Paterno" for="txtNombrePaterno" />
                            <p:inputText id="txtNombrePaterno" placeholder="Apellido Paterno"  maxlength="30"
                                         required="true"  requiredMessage="Apellido de Médico requerido" 
                                         value="#{registroSolucionMB.medicoExtended.apellidoPaterno}" />
                            <p:outputLabel value="Apellido Materno" />
                            <p:inputText id="txtApellidoMaterno" placeholder="Apellido Materno" maxlength="30"
                                         value="#{registroSolucionMB.medicoExtended.apellidoMaterno}" />
                            <p:outputLabel value="Cedula Profesional: " for="cedProf" />
                            <p:inputText id="cedProf" placeholder="Cédula Profesional"  maxlength="15" 
                                         value="#{registroSolucionMB.medicoExtended.cedProfesional}"
                                         required="true" requiredMessage="La cédula profesional es requerida" />
                            <p:outputLabel value="Cedula Especialidad: " />
                            <p:inputText id="cedEsp" placeholder="Cédula de especialidad"  maxlength="15" 
                                         value="#{registroSolucionMB.medicoExtended.cedEspecialidad}"/>
                            <p:outputLabel value="Turnos: " rendered="false" />
                            <p:selectCheckboxMenu id="turnoMedico" class="sOneMenu" rendered="false"
                                                  value="#{registroSolucionMB.listaIdTurnos}" >
                                <f:selectItems value="#{registroSolucionMB.listaTurnos}"
                                               var="turno" itemValue="#{turno.idTurno.toString()}" itemLabel="#{turno.nombre}"/>
                            </p:selectCheckboxMenu>
                        </p:panelGrid>
                        <br/>
                        <p:commandButton id="btnSave1" value="Guardar" styleClass="btnMusAzul" style="float: right;"
                                         actionListener="#{registroSolucionMB.agregarMedicos}" 
                                         onclick="PF('statusProcess').show();"
                                         oncomplete="PF('statusProcess').hide();if(!args.errorModalMedicos){PF('modalAgregarMedico').hide();}"
                                         update=":formNuevaOrden:msgValidaRegistro msgModalAddMedico" />
                        <p:commandButton title="Cancelar" value="Cancelar" oncomplete="PF('modalAgregarMedico').hide();" style="float: right;"/>
                    </h:form>
                </p:dialog>
                
            </ui:define>
        </ui:composition>
    </h:body>

</html>
